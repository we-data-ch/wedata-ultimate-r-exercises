<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="David Munoz Tord">
<meta name="dcterms.date" content="2025-05-17">
<meta name="description" content="Master essential techniques for identifying, understanding, and fixing errors in R code">

<title>Troubleshooting and Debugging in R – We Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/me.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="../../site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ECFW8LLBS7"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ECFW8LLBS7', { 'anonymize_ip': true});
</script>
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


<meta name="twitter:title" content="Troubleshooting and Debugging in R – We Data">
<meta name="twitter:description" content="Master essential techniques for identifying, understanding, and fixing errors in R code">
<meta name="twitter:creator" content="@PEcodemo">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/primary.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../beginner.html"> 
<span class="menu-text">Beginner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../intermediate.html"> 
<span class="menu-text">Intermediate</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../advanced.html"> 
<span class="menu-text">Advanced</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contribute.html"> 
<span class="menu-text">How to contribute?</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/we-data-ch"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/@wedata_unige"> <i class="bi bi-youtube" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/wedata_unige"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/company/wedata-gen%C3%A8ve/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Troubleshooting and Debugging in R</h1>
                  <div>
        <div class="description">
          Master essential techniques for identifying, understanding, and fixing errors in R code
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>David Munoz Tord </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 17, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="course-overview" class="level2">
<h2 class="anchored" data-anchor-id="course-overview">Course Overview</h2>
<p>Welcome to the Troubleshooting and Debugging in R course! Being able to effectively diagnose and fix errors is an essential skill for any R programmer. This course will teach you systematic approaches to identify common errors, use R’s built-in debugging tools, and develop robust strategies for solving problems in your code.</p>
<p>By the end of this course, you will: * Understand common error message patterns and their meanings * Master debugging tools available in R * Apply systematic troubleshooting approaches * Gain confidence in solving coding problems independently</p>
<hr>
</section>
<section id="lesson-1-understanding-error-messages" class="level2">
<h2 class="anchored" data-anchor-id="lesson-1-understanding-error-messages">Lesson 1: Understanding Error Messages</h2>
<p>When R code fails, the interpreter provides error messages that can help identify the issue. These messages often seem cryptic at first, but learning to interpret them is a valuable skill.</p>
<section id="types-of-errors-in-r" class="level3">
<h3 class="anchored" data-anchor-id="types-of-errors-in-r">Types of Errors in R</h3>
<p>R errors generally fall into three main categories:</p>
<ol type="1">
<li><strong>Syntax Errors</strong>: Occur when code doesn’t follow proper R syntax rules</li>
<li><strong>Runtime Errors</strong>: Occur during execution when R encounters an invalid operation</li>
<li><strong>Logical Errors</strong>: Code runs without errors but produces incorrect results</li>
</ol>
</section>
<section id="reading-error-messages" class="level3">
<h3 class="anchored" data-anchor-id="reading-error-messages">Reading Error Messages</h3>
<p>Error messages in R typically contain: * The specific error encountered * The function where the error occurred * Sometimes, line numbers or context for the error</p>
<p><strong>Example: Basic Error Messages</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Syntax error (missing closing parenthesis)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Reference error (object not found)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(nonexistent_variable)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Type error (incompatible data types)</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="st">"string"</span> <span class="sc">+</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in parse(text = input): &lt;text&gt;:5:1: unexpected symbol
4: # Reference error (object not found)
5: print
   ^</code></pre>
</div>
</div>
<p>When facing errors, focus on these key parts: * The error message text itself * The function name mentioned * The context or line number * Any traceback information showing the call stack</p>
</section>
<section id="common-error-messages-and-their-meanings" class="level3">
<h3 class="anchored" data-anchor-id="common-error-messages-and-their-meanings">Common Error Messages and Their Meanings</h3>
<p><strong>1. “object not found”</strong> This indicates trying to reference a variable or function that doesn't exist in the current environment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Common causes:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Typos in variable names</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>mean_value <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mean_vlue)  <span class="co"># Typo in variable name</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: object 'mean_vlue' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Forgetting to load a package</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># head(starwars)  # Without loading dplyr</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Variable exists in a different environment (scope)</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>example_function <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  internal_variable <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># After the function executes, trying to access:</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># print(internal_variable)  # Error: object not found</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>2. “cannot open the connection”</strong> This error usually relates to file operations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trying to read a non-existent file</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">"file_that_does_not_exist.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in file(file, "rt"): cannot open file 'file_that_does_not_exist.csv':
No such file or directory</code></pre>
</div>
<div class="cell-output cell-output-error">
<pre><code>Error in file(file, "rt"): cannot open the connection</code></pre>
</div>
</div>
<p><strong>3. “argument is missing, with no default”</strong> Functions require certain arguments, and this error occurs when you miss a required one.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seq() requires at least \'from\' and \'to\'</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p><strong>4. “non-numeric argument to binary operator”</strong> This occurs when trying to perform mathematical operations on non-numeric values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="st">"hello"</span> <span class="sc">*</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "hello" * 3: non-numeric argument to binary operator</code></pre>
</div>
</div>
<p><strong>Exercise 1.1: Identifying Error Types</strong></p>
<p>For each code snippet below: 1. Run the code to see the error 2. Identify the type of error (syntax, runtime, or logical) 3. Explain what caused the error 4. Fix the code to make it work</p>
<div class="cell" data-exercise="ex1-1" data-solution_hidden="true">
<div>
<div id="webr-1" class="exercise-cell">

</div>
<script type="webr-1-contents">
eyJjb2RlIjoiXG4jIENvZGUgU25pcHBldCAxXG5kYXQgPC0gYygxLCAyLCAzLCBcImZvdXJcIiwgNSlcbm1lYW4oZGF0KVxuXG4jIENvZGUgU25pcHBldCAyXG52YWx1ZXMgPC0gYygxMCwgMjAsIDMwLCA0MClcbmZvciAoaSBpbiAxOjUpIHtcbiAgcHJpbnQodmFsdWVzW2ldKVxufVxuXG4jIENvZGUgU25pcHBldCAzXG5jYWxjdWxhdGVfYXJlYSA8LSBmdW5jdGlvbihsZW5ndGgsIHdpZHRoKSB7XG4gIGFyZWEgPC0gbGVuZ3RoICogd2lkdGhcbiAgcmV0dXJuKGFyZWEpXG59XG5jYWxjdWxhdGVfYXJlYSg1KVxuXG4jIENvZGUgU25pcHBldCA0XG54IDwtIGMoMSwgMiwgM1xueSA8LSB4ICsgMVxucHJpbnQoeSkiLCJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWUsInNvbHV0aW9uX2hpZGRlbiI6dHJ1ZSwiZXhlcmNpc2UiOiJleDEtMSJ9fQ==
</script>
</div>
</div>
<p><strong>Exercise 1.2: Understanding Error Messages</strong></p>
<p>Given the following error messages, determine the possible cause and how you would fix it:</p>
<div class="cell" data-exercise="ex1-2" data-solution_hidden="true">
<div>
<div id="webr-2" class="exercise-cell">

</div>
<script type="webr-2-contents">
eyJjb2RlIjoiXG4jIDEuIEVycm9yIGluIGRhdGEuZnJhbWUoTmFtZSA9IGMoXCJBbGljZVwiLCBcIkJvYlwiLCBcIkNoYXJsaWVcIiksIEFnZSA9IGMoMjUsIDMwKSwgIDogXG4jICAgIGFyZ3VtZW50cyBpbXBseSBkaWZmZXJpbmcgbnVtYmVyIG9mIHJvd3M6IDMsIDJcblxuIyBZb3VyIGV4cGxhbmF0aW9uOlxuIyBUaGUgZGF0YS5mcmFtZSgpIGZ1bmN0aW9uIGlzIGJlaW5nIGNhbGxlZCB3aXRoIHZlY3RvcnMgb2YgZGlmZmVyZW50IGxlbmd0aHMuXG4jIFRoZSAnTmFtZScgdmVjdG9yIGhhcyAzIGVsZW1lbnRzLCBidXQgdGhlICdBZ2UnIHZlY3RvciBvbmx5IGhhcyAyLlxuIyBGaXg6IE1ha2Ugc3VyZSBhbGwgdmVjdG9ycyBoYXZlIHRoZSBzYW1lIGxlbmd0aC5cblxuZGF0YV9maXhlZCA8LSBkYXRhLmZyYW1lKFxuICBOYW1lID0gYyhcIkFsaWNlXCIsIFwiQm9iXCIsIFwiQ2hhcmxpZVwiKSxcbiAgQWdlID0gYygyNSwgMzAsIDM1KSAgIyBBZGRlZCB0aGUgbWlzc2luZyB2YWx1ZVxuKVxucHJpbnQoZGF0YV9maXhlZClcblxuIyAyLiBFcnJvciBpbiBsaWJyYXJ5KGdncGxvdDMpIDogdGhlcmUgaXMgbm8gcGFja2FnZSBjYWxsZWQgJ2dncGxvdDMnXG5cbiMgWW91ciBleHBsYW5hdGlvbjpcbiMgVGhlIHBhY2thZ2UgbmFtZSBpcyBpbmNvcnJlY3QuIFRoZSBjb3JyZWN0IHBhY2thZ2UgbmFtZSBpcyAnZ2dwbG90MicuXG4jIEZpeDogVXNlIHRoZSBjb3JyZWN0IHBhY2thZ2UgbmFtZS5cblxuIyBsaWJyYXJ5KGdncGxvdDIpICAjIENvcnJlY3QgcGFja2FnZSBuYW1lXG5cbiMgMy4gRXJyb3I6IHVuZXhwZWN0ZWQgc3ltYm9sIGluIFwibXkgcmVzdWx0XCJcblxuIyBZb3VyIGV4cGxhbmF0aW9uOlxuIyBWYXJpYWJsZSBuYW1lcyBpbiBSIGNhbm5vdCBjb250YWluIHNwYWNlcy4gXG4jIEZpeDogVXNlIGFuIHVuZGVyc2NvcmUgb3IgcGVyaW9kIGluc3RlYWQgb2YgYSBzcGFjZS5cblxubXlfcmVzdWx0IDwtIDQyXG5wcmludChteV9yZXN1bHQpIiwiYXR0ciI6eyJldmFsIjp0cnVlLCJlZGl0Ijp0cnVlLCJzb2x1dGlvbl9oaWRkZW4iOnRydWUsImV4ZXJjaXNlIjoiZXgxLTIifX0=
</script>
</div>
</div>
<hr>
</section>
</section>
<section id="lesson-2-debugging-tools-in-r" class="level2">
<h2 class="anchored" data-anchor-id="lesson-2-debugging-tools-in-r">Lesson 2: Debugging Tools in R</h2>
<p>R provides several built-in tools to help with debugging. Understanding these tools can save enormous time when troubleshooting complex code.</p>
<section id="basic-debugging-approaches" class="level3">
<h3 class="anchored" data-anchor-id="basic-debugging-approaches">Basic Debugging Approaches</h3>
<p>Before diving into specialized functions, consider these basic strategies:</p>
<p><strong>1. Print Statements</strong> The simplest debugging technique is to add <code>print()</code> or <code>cat()</code> statements at strategic points in your code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>complex_calculation <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Input values:"</span>, x, <span class="st">"and"</span>, y))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  intermediate_result <span class="ot">&lt;-</span> x <span class="sc">*</span> y</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Intermediate result:"</span>, intermediate_result))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  final_result <span class="ot">&lt;-</span> intermediate_result <span class="sc">+</span> x</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Final result:"</span>, final_result))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(final_result)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="fu">complex_calculation</span>(<span class="dv">5</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Input values: 5 and 3"
[1] "Intermediate result: 15"
[1] "Final result: 20"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20</code></pre>
</div>
</div>
<p><strong>2. Using <code>str()</code> and <code>class()</code></strong> Often, errors occur because the data isn't the type or structure you expect.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>sample_data <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">numbers =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="st">"hello world"</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">matrix =</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(sample_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ numbers: int [1:5] 1 2 3 4 5
 $ text   : chr "hello world"
 $ matrix : int [1:3, 1:3] 1 2 3 4 5 6 7 8 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(sample_data<span class="sc">$</span>numbers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(sample_data<span class="sc">$</span>text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
</section>
<section id="specialized-debugging-functions" class="level3">
<h3 class="anchored" data-anchor-id="specialized-debugging-functions">Specialized Debugging Functions</h3>
<p>R provides several specialized debugging functions:</p>
<p><strong>1. <code>traceback()</code></strong> After an error occurs, <code>traceback()</code> shows the sequence of function calls that led to the error.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example of using traceback()</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">g</span>()</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">h</span>()</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">stop</span>(<span class="st">"Error in h"</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co"># This would cause an error</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># f()</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Then you can run:</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co"># traceback()</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Which would show the calling sequence:</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 3: stop("Error in h") at #1</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 2: h() at #1</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 1: g() at #1</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 0: f()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>2. <code>browser()</code></strong> Inserts an interactive debugging environment at any point in your function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>debug_calculation <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This launches the browser when the function runs</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">browser</span>()</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  step1 <span class="ot">&lt;-</span> x <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  step2 <span class="ot">&lt;-</span> y <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> step1 <span class="sc">*</span> step2</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co"># When calling this function, execution will pause at browser()</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co"># debug_calculation(5, 3)</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="co"># In the browser, you can:</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co"># - Type 'n' to execute the next statement</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="co"># - Type 'c' to continue to the end of the function</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="co"># - Type 'Q' to quit debugging</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="co"># - Type variable names to see their values</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="co"># - Execute any R code to inspect the environment</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>3. <code>debug()</code> and <code>debugonce()</code></strong> Marks a function for debugging, activating browser mode when the function runs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># debug() flags a function for debugging</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># debugonce() does it for just the next call</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>simple_function <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># debug(simple_function)</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="co"># simple_function(5)</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co"># undebug(simple_function)</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Or for a single use:</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co"># debugonce(simple_function)</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co"># simple_function(5)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>4. The Error Inspector in RStudio</strong> When an error occurs in RStudio, you can often click on “Show Traceback” to see the call stack, and “Rerun with Debug” to enter debugging mode.</p>
</section>
<section id="using-try-and-trycatch" class="level3">
<h3 class="anchored" data-anchor-id="using-try-and-trycatch">Using <code>try()</code> and <code>tryCatch()</code></h3>
<p>For more controlled error handling, R provides <code>try()</code> and <code>tryCatch()</code> functions.</p>
<p><strong>1. <code>try()</code> - Continue execution despite errors</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Without try(), this would stop execution</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>result1 <span class="ot">&lt;-</span> <span class="fu">try</span>(<span class="dv">1</span> <span class="sc">+</span> <span class="st">"a"</span>, <span class="at">silent =</span> <span class="cn">TRUE</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"This code runs even after the error"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "This code runs even after the error"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if an error occurred</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">inherits</span>(result1, <span class="st">"try-error"</span>)) {</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"An error occurred in the first operation"</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "An error occurred in the first operation"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Continue with other operations</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>result2 <span class="ot">&lt;-</span> <span class="fu">try</span>(<span class="dv">1</span> <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Second result:"</span>, result2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Second result: 3"</code></pre>
</div>
</div>
<p><strong>2. <code>tryCatch()</code> - More sophisticated error handling</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># Initialize result</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The main code to try</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> <span class="dv">0</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(x)  <span class="co"># This won't execute due to the error</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Code to run if an error occurs</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">"An error occurred: "</span>, e<span class="sc">$</span>message)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NA</span>)  <span class="co"># Return a default value</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">warning =</span> <span class="cf">function</span>(w) {</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Code to run if a warning occurs</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">"A warning occurred: "</span>, w<span class="sc">$</span>message)</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">finally =</span> {</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Code that always runs, regardless of error/warning</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">"This cleanup code always runs"</span>)</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>This cleanup code always runs</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<p><strong>Exercise 2.1: Using Debugging Tools</strong></p>
<p>Practice using different debugging techniques:</p>
<div class="cell" data-exercise="ex2-1" data-solution_hidden="true">
<div>
<div id="webr-3" class="exercise-cell">

</div>
<script type="webr-3-contents">
eyJjb2RlIjoicmVzdWx0IDwtIE5VTEwgIyBJbml0aWFsaXplIHJlc3VsdFxubGlicmFyeSh0aWR5dmVyc2UpXG5cbiMgVGhpcyBmdW5jdGlvbiBoYXMgYW4gZXJyb3IuIFVzZSBkZWJ1Z2dpbmcgdG9vbHMgdG8gZmluZCBhbmQgZml4IGl0LlxuY2FsY3VsYXRlX3N0YXRpc3RpY3MgPC0gZnVuY3Rpb24oZGF0YSkge1xuICAjIENhbGN1bGF0ZSB0aGUgbWVhbiBvZiBlYWNoIGNvbHVtblxuICBpZiAoIWlzLmRhdGEuZnJhbWUoZGF0YSkpIHtcbiAgICBzdG9wKFwiSW5wdXQgbXVzdCBiZSBhIGRhdGEgZnJhbWVcIilcbiAgfVxuICBcbiAgbWVhbnMgPC0gY29sTWVhbnMoZGF0YSkgICMgVGhpcyB3aWxsIGZhaWwgb24gbm9uLW51bWVyaWMgY29sdW1uc1xuICBcbiAgIyBDYWxjdWxhdGUgc3RhbmRhcmQgZGV2aWF0aW9uc1xuICBzZHMgPC0gc2FwcGx5KGRhdGEsIHNkKVxuICBcbiAgIyBDYWxjdWxhdGUgcmFuZ2VzXG4gIHJhbmdlcyA8LSBzYXBwbHkoZGF0YSwgZnVuY3Rpb24oeCkgbWF4KHgpIC0gbWluKHgpKVxuICBcbiAgIyBSZXR1cm4gcmVzdWx0c1xuICByZXR1cm4obGlzdChtZWFucyA9IG1lYW5zLCBzZHMgPSBzZHMsIHJhbmdlcyA9IHJhbmdlcykpXG59XG5cbiMgQ3JlYXRlIGEgdGVzdCBkYXRhc2V0XG50ZXN0X2RhdGEgPC0gZGF0YS5mcmFtZShcbiAgYSA9IDE6NSxcbiAgYiA9IGMoNSwgMTAsIDE1LCAyMCwgMjUpLFxuICBjID0gYyhcImFwcGxlXCIsIFwiYmFuYW5hXCIsIFwiY2hlcnJ5XCIsIFwiZGF0ZVwiLCBcImVsZGVyYmVycnlcIikgICMgTm9uLW51bWVyaWMgY29sdW1uXG4pXG5cbiMgVXNpbmcgdHJ5KCkgdG8gaGFuZGxlIHRoZSBlcnJvciBtb3JlIGdyYWNlZnVsbHlcbnJlc3VsdCA8LSB0cnkoY2FsY3VsYXRlX3N0YXRpc3RpY3ModGVzdF9kYXRhKSwgc2lsZW50ID0gVFJVRSlcblxuaWYgKGluaGVyaXRzKHJlc3VsdCwgXCJ0cnktZXJyb3JcIikpIHtcbiAgcHJpbnQoXCJFcnJvciBkZXRlY3RlZCEgTGV0J3MgZGVidWcuLi5cIilcbiAgXG4gICMgMS4gSWRlbnRpZnkgdGhlIGlzc3VlXG4gIHByaW50KFwiSXNzdWU6IFRoZSBmdW5jdGlvbiBmYWlscyBiZWNhdXNlIGl0IHRyaWVzIHRvIGNhbGN1bGF0ZSBzdGF0aXN0aWNzIG9uIGEgbm9uLW51bWVyaWMgY29sdW1uLlwiKVxuICBcbiAgIyAyLiBGaXggdGhlIGZ1bmN0aW9uXG4gIGNhbGN1bGF0ZV9zdGF0aXN0aWNzX2ZpeGVkIDwtIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBpZiAoIWlzLmRhdGEuZnJhbWUoZGF0YSkpIHtcbiAgICAgIHN0b3AoXCJJbnB1dCBtdXN0IGJlIGEgZGF0YSBmcmFtZVwiKVxuICAgIH1cbiAgICBcbiAgICAjIE9ubHkgc2VsZWN0IG51bWVyaWMgY29sdW1uc1xuICAgIG51bWVyaWNfZGF0YSA8LSBkYXRhICU+JSBzZWxlY3RfaWYoaXMubnVtZXJpYylcbiAgICBcbiAgICBpZiAobmNvbChudW1lcmljX2RhdGEpID09IDApIHtcbiAgICAgIHN0b3AoXCJObyBudW1lcmljIGNvbHVtbnMgZm91bmQgaW4gdGhlIGRhdGFcIilcbiAgICB9XG4gICAgXG4gICAgbWVhbnMgPC0gY29sTWVhbnMobnVtZXJpY19kYXRhKVxuICAgIHNkcyA8LSBzYXBwbHkobnVtZXJpY19kYXRhLCBzZClcbiAgICByYW5nZXMgPC0gc2FwcGx5KG51bWVyaWNfZGF0YSwgZnVuY3Rpb24oeCkgbWF4KHgpIC0gbWluKHgpKVxuICAgIFxuICAgIHJldHVybihsaXN0KG1lYW5zID0gbWVhbnMsIHNkcyA9IHNkcywgcmFuZ2VzID0gcmFuZ2VzKSlcbiAgfVxuICBcbiAgIyAzLiBUZXN0IHRoZSBmaXhlZCBmdW5jdGlvblxuICByZXN1bHRfZml4ZWQgPC0gY2FsY3VsYXRlX3N0YXRpc3RpY3NfZml4ZWQodGVzdF9kYXRhKVxuICBwcmludChcIkZpeGVkIGZ1bmN0aW9uIHJlc3VsdHM6XCIpXG4gIHByaW50KHJlc3VsdF9maXhlZClcbn0iLCJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWUsInNvbHV0aW9uX2hpZGRlbiI6dHJ1ZSwiZXhlcmNpc2UiOiJleDItMSJ9fQ==
</script>
</div>
</div>
<p><strong>Exercise 2.2: Building Robust Functions</strong></p>
<p>Create a function with built-in error handling that calculates the square root of each element in a vector, but handles negative numbers gracefully.</p>
<div class="cell" data-exercise="ex2-2" data-solution_hidden="true">
<div>
<div id="webr-4" class="exercise-cell">

</div>
<script type="webr-4-contents">
eyJjb2RlIjoibGlicmFyeSh0aWR5dmVyc2UpXG5cbiMgQ29tcGxldGUgdGhpcyBmdW5jdGlvbiB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZ1xuc2FmZV9zcXJ0IDwtIGZ1bmN0aW9uKHgsIGhhbmRsZV9uZWdhdGl2ZSA9IFRSVUUpIHtcbiAgaWYgKCFpcy5udW1lcmljKHgpKSB7XG4gICAgc3RvcChcIklucHV0IG11c3QgYmUgbnVtZXJpY1wiKVxuICB9XG4gIFxuICAjIFByb2Nlc3MgZWFjaCBlbGVtZW50IHdpdGggdHJ5Q2F0Y2hcbiAgcmVzdWx0IDwtIHNhcHBseSh4LCBmdW5jdGlvbih2YWwpIHtcbiAgICB0cnlDYXRjaChcbiAgICAgIHtcbiAgICAgICAgaWYgKHZhbCA8IDAgJiYgaGFuZGxlX25lZ2F0aXZlKSB7XG4gICAgICAgICAgd2FybmluZyhwYXN0ZShcIlRha2luZyBzcXVhcmUgcm9vdCBvZiBuZWdhdGl2ZSBudW1iZXI6XCIsIHZhbCkpXG4gICAgICAgICAgcmV0dXJuKGNvbXBsZXgocmVhbCA9IDAsIGltYWdpbmFyeSA9IHNxcnQoYWJzKHZhbCkpKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4oc3FydCh2YWwpKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXJyb3IgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHdhcm5pbmcocGFzdGUoXCJFcnJvciB3aXRoIHZhbHVlXCIsIHZhbCwgXCI6XCIsIGUkbWVzc2FnZSkpXG4gICAgICAgIHJldHVybihOQSlcbiAgICAgIH1cbiAgICApXG4gIH0pXG4gIFxuICByZXR1cm4ocmVzdWx0KVxufVxuXG4jIFRlc3QgY2FzZXNcbnRlc3RfdmVjdG9yMSA8LSBjKDQsIDksIDE2LCAyNSlcbnRlc3RfdmVjdG9yMiA8LSBjKDQsIC05LCAxNiwgXCJzdHJpbmdcIilcbnRlc3RfdmVjdG9yMyA8LSBjKDQsIC05LCAxNiwgMjUpXG5cbiMgVGVzdCB3aXRoIHNpbXBsZSB2ZWN0b3JcbnJlc3VsdDEgPC0gc2FmZV9zcXJ0KHRlc3RfdmVjdG9yMSlcbnByaW50KFwiUmVzdWx0IDEgKGFsbCBwb3NpdGl2ZSBudW1iZXJzKTpcIilcbnByaW50KHJlc3VsdDEpXG5cbiMgVGVzdCB3aXRoIG1peGVkIHR5cGVzIChzaG91bGQgaGFuZGxlIHRoZSBlcnJvcilcbnJlc3VsdDIgPC0gdHJ5KHNhZmVfc3FydCh0ZXN0X3ZlY3RvcjIpLCBzaWxlbnQgPSBUUlVFKVxucHJpbnQoXCJSZXN1bHQgMiAobWl4ZWQgdHlwZXMgLSBzaG91bGQgc2hvdyBlcnJvciBtZXNzYWdlKTpcIilcbnByaW50KHJlc3VsdDIpXG5cbiMgVGVzdCB3aXRoIG5lZ2F0aXZlIG51bWJlcnNcbnJlc3VsdDMgPC0gc2FmZV9zcXJ0KHRlc3RfdmVjdG9yMylcbnByaW50KFwiUmVzdWx0IDMgKHdpdGggbmVnYXRpdmUgbnVtYmVyKTpcIilcbnByaW50KHJlc3VsdDMpXG5cbiMgVGVzdCB3aXRoIGhhbmRsZV9uZWdhdGl2ZSA9IEZBTFNFXG5yZXN1bHQ0IDwtIHRyeShzYWZlX3NxcnQodGVzdF92ZWN0b3IzLCBoYW5kbGVfbmVnYXRpdmUgPSBGQUxTRSksIHNpbGVudCA9IFRSVUUpXG5wcmludChcIlJlc3VsdCA0IChuZWdhdGl2ZSBudW1iZXJzIG5vdCBhbGxvd2VkKTpcIilcbnByaW50KHJlc3VsdDQpIiwiYXR0ciI6eyJldmFsIjp0cnVlLCJlZGl0Ijp0cnVlLCJzb2x1dGlvbl9oaWRkZW4iOnRydWUsImV4ZXJjaXNlIjoiZXgyLTIifX0=
</script>
</div>
</div>
<hr>
</section>
</section>
<section id="lesson-3-systematic-troubleshooting" class="level2">
<h2 class="anchored" data-anchor-id="lesson-3-systematic-troubleshooting">Lesson 3: Systematic Troubleshooting</h2>
<p>Beyond specific tools, developing a systematic approach to debugging will make you more efficient at solving problems. This section covers structured approaches to troubleshooting.</p>
<section id="the-debugging-mindset" class="level3">
<h3 class="anchored" data-anchor-id="the-debugging-mindset">The Debugging Mindset</h3>
<p>Effective debugging requires: * Patience and persistence * Systematic, methodical thinking * Breaking complex problems into smaller parts * Formulating and testing hypotheses</p>
</section>
<section id="isolating-the-problem" class="level3">
<h3 class="anchored" data-anchor-id="isolating-the-problem">Isolating the Problem</h3>
<p>When facing a complex error, try to:</p>
<ol type="1">
<li><strong>Create a minimal reproducible example (reprex)</strong>
<ul>
<li>Strip down your code to the smallest version that still produces the error</li>
<li>Remove unnecessary data or code that isn’t relevant to the problem</li>
</ul></li>
<li><strong>Binary search debugging</strong>
<ul>
<li>Comment out half of your code to see if the error still occurs</li>
<li>If it does, the problem is in the remaining half; if not, it’s in the half you commented out</li>
<li>Repeat this process, narrowing down the location of the error</li>
</ul></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example of code you might need to debug</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>complex_function <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 1 - Data loading</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ...</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 2 - Data preprocessing</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ...</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 3 - Analysis</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ...</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Step 4 - Visualization</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ...</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Binary search approach:</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Comment out steps 3 &amp; 4 to see if error occurs in steps 1 &amp; 2</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. If error still occurs, comment out step 2 to check if it's in step 1</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Continue narrowing down until you find the exact line</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="verifying-assumptions" class="level3">
<h3 class="anchored" data-anchor-id="verifying-assumptions">Verifying Assumptions</h3>
<p>Many bugs stem from incorrect assumptions about: * What functions do * What data contains * The state of objects at different points in code execution</p>
<p>Always verify these assumptions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check function behavior with simple inputs</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars, <span class="dv">2</span>)  <span class="co"># Make sure you understand what head() does</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4      21   6  160 110  3.9 2.620 16.46  0  1    4    4
Mazda RX4 Wag  21   6  160 110  3.9 2.875 17.02  0  1    4    4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check data types and structures</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(mtcars<span class="sc">$</span>mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.data.frame</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for missing values</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(mtcars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for unexpected values</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mtcars<span class="sc">$</span>mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  10.40   15.43   19.20   20.09   22.80   33.90 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(mtcars<span class="sc">$</span>mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10.4 33.9</code></pre>
</div>
</div>
</section>
<section id="using-version-control-for-debugging" class="level3">
<h3 class="anchored" data-anchor-id="using-version-control-for-debugging">Using Version Control for Debugging</h3>
<p>Version control systems like Git can be valuable debugging tools:</p>
<ol type="1">
<li><strong>Bisect through commits</strong>:
<ul>
<li>If your code worked before, use <code>git bisect</code> to find which commit introduced the bug</li>
</ul></li>
<li><strong>Compare working and non-working versions</strong>:
<ul>
<li>Use <code>git diff</code> to see what changed between versions</li>
</ul></li>
<li><strong>Revert to a known good state</strong>:
<ul>
<li>When completely stuck, you can fall back to a version you know works</li>
</ul></li>
</ol>
</section>
<section id="rubber-duck-debugging" class="level3">
<h3 class="anchored" data-anchor-id="rubber-duck-debugging">Rubber Duck Debugging</h3>
<p>Sometimes, the mere act of explaining your code helps you spot the issue:</p>
<ol type="1">
<li>Explain your code line by line to an inanimate object (or a patient colleague)</li>
<li>Articulate what each line is supposed to do</li>
<li>Describe the expected vs.&nbsp;actual behavior</li>
<li>Often, you’ll spot the issue while explaining</li>
</ol>
<p><strong>Exercise 3.1: Isolating Bugs</strong></p>
<p>The following function has multiple issues. Use a systematic approach to identify and fix them.</p>
<div class="cell" data-exercise="ex3-1" data-solution_hidden="true">
<div>
<div id="webr-5" class="exercise-cell">

</div>
<script type="webr-5-contents">
eyJjb2RlIjoibGlicmFyeSh0aWR5dmVyc2UpXG5cbiMgVGhpcyBmdW5jdGlvbiBhdHRlbXB0cyB0byBjYWxjdWxhdGUgdGhlIG1lYW4gb2YgZWFjaCBjb2x1bW4gaW4gYSBkYXRhIGZyYW1lLFxuIyBhZnRlciBmaWx0ZXJpbmcgcm93cyBiYXNlZCBvbiBhIGNvbmRpdGlvbi4gSXQgaGFzIHNldmVyYWwgYnVncy5cbmFuYWx5emVfZGF0YSA8LSBmdW5jdGlvbihkYXRhLCBmaWx0ZXJfY29sLCBtaW5fdmFsdWUpIHtcbiAgIyBTdGVwIDE6IENoZWNrIGlucHV0IGRhdGFcbiAgaWYgKCFpcy5kYXRhLmZyYW1lKGRhdGEpKSB7XG4gICAgc3RvcChcIklucHV0IG11c3QgYmUgYSBkYXRhIGZyYW1lXCIpXG4gIH1cbiAgXG4gICMgU3RlcCAyOiBGaWx0ZXIgdGhlIGRhdGFcbiAgIyBCdWcgMTogTWlzc2luZyBjb21tYSBpbiBmaWx0ZXIgc3ludGF4XG4gIGZpbHRlcmVkX2RhdGEgPC0gZGF0YVtkYXRhW2ZpbHRlcl9jb2xdID4gbWluX3ZhbHVlXVxuICBcbiAgIyBTdGVwIDM6IENhbGN1bGF0ZSBjb2x1bW4gbWVhbnNcbiAgIyBCdWcgMjogVXNpbmcgY29sTWVhbnMgb24gYSBkYXRhIGZyYW1lIHRoYXQgbWlnaHQgY29udGFpbiBub24tbnVtZXJpYyBjb2x1bW5zXG4gIHJlc3VsdCA8LSBjb2xNZWFucyhmaWx0ZXJlZF9kYXRhKVxuICBcbiAgIyBTdGVwIDQ6IFJldHVybiByZXN1bHRzXG4gICMgQnVnIDM6IE5vIHJldHVybiBzdGF0ZW1lbnRcbiAgcmVzdWx0XG59XG5cbiMgVGVzdCBkYXRhXG50ZXN0X2RmIDwtIGRhdGEuZnJhbWUoXG4gIGlkID0gMTo1LFxuICB2YWx1ZSA9IGMoMTAsIDIwLCAzMCwgNDAsIDUwKSxcbiAgY2F0ZWdvcnkgPSBjKFwiQVwiLCBcIkJcIiwgXCJBXCIsIFwiQ1wiLCBcIkJcIilcbilcblxuIyBTdGVwIDE6IFRlc3Qgd2l0aCBzaW1wbGUgaW5wdXRzIHRvIGlkZW50aWZ5IGVycm9yc1xudGVzdF9yZXN1bHQgPC0gdHJ5KGFuYWx5emVfZGF0YSh0ZXN0X2RmLCBcInZhbHVlXCIsIDI1KSwgc2lsZW50ID0gVFJVRSlcbmlmIChpbmhlcml0cyh0ZXN0X3Jlc3VsdCwgXCJ0cnktZXJyb3JcIikpIHtcbiAgcHJpbnQoXCJGaXJzdCBhdHRlbXB0IGZhaWxlZCB3aXRoIGVycm9yXCIpXG59XG5cbiMgU3RlcCAyOiBGaXggYnVncyBvbmUgYnkgb25lXG5hbmFseXplX2RhdGFfZml4ZWQgPC0gZnVuY3Rpb24oZGF0YSwgZmlsdGVyX2NvbCwgbWluX3ZhbHVlKSB7XG4gICMgRml4IDE6IElucHV0IHZhbGlkYXRpb25cbiAgaWYgKCFpcy5kYXRhLmZyYW1lKGRhdGEpKSB7XG4gICAgc3RvcChcIklucHV0IG11c3QgYmUgYSBkYXRhIGZyYW1lXCIpXG4gIH1cbiAgXG4gIGlmICghZmlsdGVyX2NvbCAlaW4lIG5hbWVzKGRhdGEpKSB7XG4gICAgc3RvcChwYXN0ZShcIkNvbHVtblwiLCBmaWx0ZXJfY29sLCBcIm5vdCBmb3VuZCBpbiBkYXRhXCIpKVxuICB9XG4gIFxuICAjIEZpeCAyOiBQcm9wZXIgZmlsdGVyaW5nIHN5bnRheFxuICBmaWx0ZXJlZF9kYXRhIDwtIGRhdGFbZGF0YVtbZmlsdGVyX2NvbF1dID4gbWluX3ZhbHVlLCBdXG4gIFxuICAjIEZpeCAzOiBIYW5kbGUgZW1wdHkgcmVzdWx0XG4gIGlmIChucm93KGZpbHRlcmVkX2RhdGEpID09IDApIHtcbiAgICB3YXJuaW5nKFwiTm8gcm93cyBtYXRjaCB0aGUgZmlsdGVyIGNyaXRlcmlhXCIpXG4gICAgcmV0dXJuKE5VTEwpXG4gIH1cbiAgXG4gICMgRml4IDQ6IENhbGN1bGF0ZSBtZWFucyBvbmx5IGZvciBudW1lcmljIGNvbHVtbnNcbiAgbnVtZXJpY19jb2xzIDwtIHNhcHBseShmaWx0ZXJlZF9kYXRhLCBpcy5udW1lcmljKVxuICBpZiAoc3VtKG51bWVyaWNfY29scykgPT0gMCkge1xuICAgIHdhcm5pbmcoXCJObyBudW1lcmljIGNvbHVtbnMgZm91bmRcIilcbiAgICByZXR1cm4oTlVMTClcbiAgfVxuICBcbiAgcmVzdWx0IDwtIGNvbE1lYW5zKGZpbHRlcmVkX2RhdGFbLCBudW1lcmljX2NvbHMsIGRyb3AgPSBGQUxTRV0pXG4gIFxuICAjIEZpeCA1OiBFeHBsaWNpdCByZXR1cm5cbiAgcmV0dXJuKHJlc3VsdClcbn1cblxuIyBUZXN0IHRoZSBmaXhlZCBmdW5jdGlvblxuZmluYWxfcmVzdWx0IDwtIGFuYWx5emVfZGF0YV9maXhlZCh0ZXN0X2RmLCBcInZhbHVlXCIsIDI1KVxucHJpbnQoXCJGaXhlZCBmdW5jdGlvbiByZXN1bHQ6XCIpXG5wcmludChmaW5hbF9yZXN1bHQpXG5cbiMgVGVzdCB3aXRoIGEgZGlmZmVyZW50IGZpbHRlclxuZmluYWxfcmVzdWx0MiA8LSBhbmFseXplX2RhdGFfZml4ZWQodGVzdF9kZiwgXCJ2YWx1ZVwiLCA0NSlcbnByaW50KFwiVGVzdCB3aXRoIGhpZ2hlciB0aHJlc2hvbGQgKHNob3VsZCBpbmNsdWRlIHdhcm5pbmcpOlwiKVxucHJpbnQoZmluYWxfcmVzdWx0MikiLCJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWUsInNvbHV0aW9uX2hpZGRlbiI6dHJ1ZSwiZXhlcmNpc2UiOiJleDMtMSJ9fQ==
</script>
</div>
</div>
<p><strong>Exercise 3.2: Creating a Minimal Reproducible Example</strong></p>
<p>Take this complex and error-prone code and create a minimal reproducible example that isolates the core issue.</p>
<div class="cell" data-exercise="ex3-2" data-solution_hidden="true">
<div>
<div id="webr-6" class="exercise-cell">

</div>
<script type="webr-6-contents">
eyJjb2RlIjoibGlicmFyeSh0aWR5dmVyc2UpXG5cbiMgQ29tcGxleCBmdW5jdGlvbiB3aXRoIGFuIGVycm9yIHNvbWV3aGVyZVxucHJvY2Vzc19kYXRhIDwtIGZ1bmN0aW9uKGRhdGEsIGdyb3VwX3ZhciwgbWVhc3VyZV92YXIsIGRvX3RyYW5zZm9ybSA9IFRSVUUpIHtcbiAgIyBWYWxpZGF0ZSBpbnB1dHNcbiAgaWYgKCFpcy5kYXRhLmZyYW1lKGRhdGEpIHx8ICFncm91cF92YXIgJWluJSBuYW1lcyhkYXRhKSB8fCAhbWVhc3VyZV92YXIgJWluJSBuYW1lcyhkYXRhKSkge1xuICAgIHN0b3AoXCJJbnZhbGlkIGlucHV0c1wiKVxuICB9XG4gIFxuICAjIEFwcGx5IG9wdGlvbmFsIHRyYW5zZm9ybWF0aW9uXG4gIGlmIChkb190cmFuc2Zvcm0pIHtcbiAgICBkYXRhIDwtIGRhdGEgJT4lXG4gICAgICBtdXRhdGUoYWNyb3NzKHdoZXJlKGlzLm51bWVyaWMpLCB+IC4gKyAxMDApKVxuICB9XG4gIFxuICAjIEdyb3VwIGFuZCBzdW1tYXJpemVcbiAgcmVzdWx0IDwtIGRhdGEgJT4lXG4gICAgZ3JvdXBfYnkoYWNyb3NzKGFsbF9vZihncm91cF92YXIpKSkgJT4lXG4gICAgc3VtbWFyaXplKFxuICAgICAgbWVhbl92YWx1ZSA9IG1lYW4oISFzeW0obWVhc3VyZV92YXIpKSxcbiAgICAgIGNvdW50ID0gbigpLFxuICAgICAgLmdyb3VwcyA9IFwiZHJvcFwiXG4gICAgKSAlPiVcbiAgICBmaWx0ZXIoY291bnQgPj0gMikgJT4lICAjIEVycm9yOiBTaG91bGQgYmUgPj0gMSBpZiB3ZSB3YW50IHRvIGtlZXAgYWxsIGdyb3Vwc1xuICAgIGFycmFuZ2UoZGVzYyhtZWFuX3ZhbHVlKSlcbiAgXG4gICMgTWFrZSB0aWR5IG5hbWVzXG4gIG5hbWVzKHJlc3VsdCkgPC0gc3RyX3JlcGxhY2VfYWxsKG5hbWVzKHJlc3VsdCksIFwiX1wiLCBcIi5cIilcbiAgXG4gIHJldHVybihyZXN1bHQpXG59XG5cbiMgU2FtcGxlIGRhdGFcbnRlc3RfZGF0YSA8LSBkYXRhLmZyYW1lKFxuICBncm91cCA9IGMoXCJBXCIsIFwiQVwiLCBcIkJcIiwgXCJDXCIsIFwiQ1wiLCBcIkNcIiksXG4gIHZhbHVlID0gYygxLCAyLCAzLCA0LCA1LCA2KVxuKVxuXG4jIFRyeSBydW5uaW5nIHRoZSBmdW5jdGlvbiAtIGl0J2xsIGRyb3AgZ3JvdXAgQiBiZWNhdXNlIGl0IGhhcyBvbmx5IG9uZSByZWNvcmRcbnJlc3VsdF9mdWxsIDwtIHRyeShwcm9jZXNzX2RhdGEodGVzdF9kYXRhLCBcImdyb3VwXCIsIFwidmFsdWVcIiksIHNpbGVudCA9IFRSVUUpXG5cbiMgQ3JlYXRlIGEgbWluaW1hbCByZXByb2R1Y2libGUgZXhhbXBsZSB0aGF0IGlzb2xhdGVzIHRoZSBpc3N1ZVxubWluaW1hbF9yZXByZXggPC0gZnVuY3Rpb24oKSB7XG4gICMgU2ltcGxpZmllZCBkYXRhIHdpdGgganVzdCB0aGUga2V5IGlzc3VlXG4gIHNpbXBsZV9kYXRhIDwtIGRhdGEuZnJhbWUoXG4gICAgZ3JvdXAgPSBjKFwiQVwiLCBcIkFcIiwgXCJCXCIpLFxuICAgIHZhbHVlID0gYygxLCAyLCAzKVxuICApXG4gIFxuICAjIENvcmUgaXNzdWU6IFRoZSBmaWx0ZXIoY291bnQgPj0gMikgZHJvcHMgc2luZ2xlLXJvdyBncm91cHNcbiAgcHJvYmxlbV9yZXN1bHQgPC0gc2ltcGxlX2RhdGEgJT4lXG4gICAgZ3JvdXBfYnkoZ3JvdXApICU+JVxuICAgIHN1bW1hcml6ZShcbiAgICAgIGNvdW50ID0gbigpLFxuICAgICAgLmdyb3VwcyA9IFwiZHJvcFwiXG4gICAgKSAlPiVcbiAgICBmaWx0ZXIoY291bnQgPj0gMikgICMgVGhpcyBkcm9wcyBncm91cCBCXG4gIFxuICBwcmludChcIk1pbmltYWwgZXhhbXBsZSBzaG93aW5nIHRoZSBpc3N1ZTpcIilcbiAgcHJpbnQocHJvYmxlbV9yZXN1bHQpICAjIE9ubHkgc2hvd3MgZ3JvdXAgQSwgZHJvcHMgQlxuICBcbiAgIyBGaXg6XG4gIHJlc3VsdF9maXhlZCA8LSBzaW1wbGVfZGF0YSAlPiVcbiAgICBncm91cF9ieShncm91cCkgJT4lXG4gICAgc3VtbWFyaXplKFxuICAgICAgY291bnQgPSBuKCksXG4gICAgICAuZ3JvdXBzID0gXCJkcm9wXCJcbiAgICApICU+JVxuICAgIGZpbHRlcihjb3VudCA+PSAxKSAgIyBLZWVwIGFsbCBncm91cHNcbiAgXG4gIHByaW50KFwiRml4ZWQgdmVyc2lvbjpcIilcbiAgcHJpbnQocmVzdWx0X2ZpeGVkKSAgIyBTaG93cyBib3RoIGdyb3VwcyBBIGFuZCBCXG4gIFxuICByZXR1cm4ocmVzdWx0X2ZpeGVkKSAjIFJldHVybiB0aGUgZml4ZWQgcmVzdWx0XG59XG5cbiMgUnVuIHRoZSBtaW5pbWFsIGV4YW1wbGUgYW5kIHNhdmUgdGhlIHJlc3VsdFxucmVzdWx0IDwtIG1pbmltYWxfcmVwcmV4KClcblxuIyBGaXggdGhlIGZ1bGwgZnVuY3Rpb25cbnByb2Nlc3NfZGF0YV9maXhlZCA8LSBmdW5jdGlvbihkYXRhLCBncm91cF92YXIsIG1lYXN1cmVfdmFyLCBkb190cmFuc2Zvcm0gPSBUUlVFLCBtaW5fY291bnQgPSAxKSB7XG4gICMgU2FtZSBmdW5jdGlvbiBidXQgd2l0aCBwYXJhbWV0ZXJpemVkIG1pbl9jb3VudCBhbmQgZml4ZWQgZmlsdGVyXG4gIGlmICghaXMuZGF0YS5mcmFtZShkYXRhKSB8fCAhZ3JvdXBfdmFyICVpbiUgbmFtZXMoZGF0YSkgfHwgIW1lYXN1cmVfdmFyICVpbiUgbmFtZXMoZGF0YSkpIHtcbiAgICBzdG9wKFwiSW52YWxpZCBpbnB1dHNcIilcbiAgfVxuICBcbiAgaWYgKGRvX3RyYW5zZm9ybSkge1xuICAgIGRhdGEgPC0gZGF0YSAlPiVcbiAgICAgIG11dGF0ZShhY3Jvc3Mod2hlcmUoaXMubnVtZXJpYyksIH4gLiArIDEwMCkpXG4gIH1cbiAgXG4gIHJlc3VsdCA8LSBkYXRhICU+JVxuICAgIGdyb3VwX2J5KGFjcm9zcyhhbGxfb2YoZ3JvdXBfdmFyKSkpICU+JVxuICAgIHN1bW1hcml6ZShcbiAgICAgIG1lYW5fdmFsdWUgPSBtZWFuKCEhc3ltKG1lYXN1cmVfdmFyKSksXG4gICAgICBjb3VudCA9IG4oKSxcbiAgICAgIC5ncm91cHMgPSBcImRyb3BcIlxuICAgICkgJT4lXG4gICAgZmlsdGVyKGNvdW50ID49IG1pbl9jb3VudCkgJT4lICAjIE5vdyBwYXJhbWV0ZXJpemVkXG4gICAgYXJyYW5nZShkZXNjKG1lYW5fdmFsdWUpKVxuICBcbiAgbmFtZXMocmVzdWx0KSA8LSBzdHJfcmVwbGFjZV9hbGwobmFtZXMocmVzdWx0KSwgXCJfXCIsIFwiLlwiKVxuICBcbiAgcmV0dXJuKHJlc3VsdClcbn1cblxuIyBUZXN0IHRoZSBmaXhlZCBmdW5jdGlvblxucmVzdWx0X2ZpeGVkIDwtIHByb2Nlc3NfZGF0YV9maXhlZCh0ZXN0X2RhdGEsIFwiZ3JvdXBcIiwgXCJ2YWx1ZVwiKVxucHJpbnQoXCJSZXN1bHQgZnJvbSBmaXhlZCBmdW5jdGlvbjpcIilcbnByaW50KHJlc3VsdF9maXhlZCkgICMgU2hvdWxkIHNob3cgYWxsIGdyb3VwcyBBLCBCLCBhbmQgQyIsImF0dHIiOnsiZXZhbCI6dHJ1ZSwiZWRpdCI6dHJ1ZSwic29sdXRpb25faGlkZGVuIjp0cnVlLCJleGVyY2lzZSI6ImV4My0yIn19
</script>
</div>
</div>
<hr>
</section>
</section>
<section id="part-2-advanced-topics-and-best-practices" class="level2">
<h2 class="anchored" data-anchor-id="part-2-advanced-topics-and-best-practices">Part 2: Advanced Topics and Best Practices</h2>
<hr>
</section>
<section id="lesson-4-advanced-debugging-techniques" class="level2">
<h2 class="anchored" data-anchor-id="lesson-4-advanced-debugging-techniques">Lesson 4: Advanced Debugging Techniques</h2>
<p>While the tools in Lesson 2 cover most day-to-day debugging, R offers more advanced techniques for complex scenarios, performance issues, and deeper inspection of R’s object systems.</p>
<section id="post-mortem-debugging-with-recover" class="level3">
<h3 class="anchored" data-anchor-id="post-mortem-debugging-with-recover">1. Post-mortem Debugging with <code>recover()</code></h3>
<p>The <code>recover()</code> function is invaluable when an error occurs and you want to inspect the environment of each function in the call stack at the time of the error. It’s like <code>browser()</code> but activated <em>after</em> an error.</p>
<p>To use it effectively, you can set it as the error handler globally: <code>options(error = recover)</code></p>
<p>When an error occurs, R will present a menu listing the function calls in the stack. You can select a number to enter the environment of that function call and inspect variables, just like in <code>browser()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set recover as the error handler</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">error =</span> recover)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a series of nested functions</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>func_a <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">func_b</span>(x <span class="sc">*</span> <span class="dv">2</span>)</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>func_b <span class="ot">&lt;-</span> <span class="cf">function</span>(y) {</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">func_c</span>(y <span class="sc">+</span> <span class="dv">5</span>)</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>func_c <span class="ot">&lt;-</span> <span class="cf">function</span>(z) {</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (z <span class="sc">&gt;</span> <span class="dv">10</span>) {</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Value too high in func_c!"</span>)</span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(z <span class="sc">/</span> <span class="dv">2</span>)</span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Trigger an error</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a><span class="co"># func_a(3) # This will result in z = (3*2)+5 = 11, triggering the stop()</span></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a><span class="co"># After the error, you'd see a menu like:</span></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Enter a frame number, or 0 to exit</span></span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 1: func_a(3)</span></span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a><span class="co"># 2: func_b(x * 2)</span></span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 3: func_c(y + 5)</span></span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Selection:</span></span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Typing '3' would take you into func_c's environment where you can inspect 'z'.</span></span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Typing 'ls()' would show objects in that frame.</span></span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Typing 'z' would show its value.</span></span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Typing '0' exits recover.</span></span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Don't forget to reset the error option if you don't want recover globally</span></span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a><span class="co"># options(error = NULL)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>When to use <code>recover()</code>:</strong> * When an unexpected error halts a long computation. * When you need to understand the state of multiple functions in the call stack leading to an error. * When <code>traceback()</code> isn’t enough and you need interactive inspection.</p>
</section>
<section id="profiling-code-with-rprof-and-profvis" class="level3">
<h3 class="anchored" data-anchor-id="profiling-code-with-rprof-and-profvis">2. Profiling Code with <code>Rprof()</code> and <code>profvis</code></h3>
<p>Sometimes the “bug” isn’t an error, but unexpectedly slow code. Profiling helps identify these performance bottlenecks.</p>
<p><strong>a) <code>Rprof()</code></strong> R’s built-in <code>Rprof()</code> function samples the call stack at regular intervals during code execution and writes the results to a file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start profiling, output to "Rprof.out"</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Rprof</span>(<span class="st">"Rprof.out"</span>)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Your potentially slow code here</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>slow_function <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  total <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fl">1e5</span>) {</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    total <span class="ot">&lt;-</span> total <span class="sc">+</span> <span class="fu">log</span>(<span class="fu">sqrt</span>(i))</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(total)</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">slow_function</span>()</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Stop profiling</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="fu">Rprof</span>(<span class="cn">NULL</span>)</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze the output</span></span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a><span class="fu">summaryRprof</span>(<span class="st">"Rprof.out"</span>)</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a><span class="co"># This gives a summary of time spent in each function.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The output of <code>summaryRprof()</code> can be a bit dense. It shows time spent in each function (“self” time) and time spent in that function plus functions it called (“total” time).</p>
<p><strong>b) <code>profvis</code> Package</strong> The <code>profvis</code> package provides an interactive visualization of profiling data, making it much easier to understand.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("profvis") # If not already installed</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(profvis)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Profile an expression</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="fu">profvis</span>({</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Your potentially slow code here</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  slow_function <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    total <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="fl">1e5</span>) {</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>      total <span class="ot">&lt;-</span> total <span class="sc">+</span> <span class="fu">log</span>(<span class="fu">sqrt</span>(i)) <span class="co"># sqrt() is a bit redundant here with log()</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(total)</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">slow_function</span>()</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>  another_operation <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(n) <span class="co"># Simulate some work</span></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">another_operation</span>(<span class="fl">0.5</span>)</span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a><span class="co"># This will open an interactive HTML widget in RStudio or your browser.</span></span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a><span class="co"># It shows a flame graph and data table, highlighting time-consuming calls.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>profvis</code> is highly recommended for a more intuitive understanding of where your code spends its time.</p>
</section>
<section id="debugging-s3-and-s4-methods" class="level3">
<h3 class="anchored" data-anchor-id="debugging-s3-and-s4-methods">3. Debugging S3 and S4 Methods</h3>
<p>R’s object-oriented systems (S3 and S4) use generic functions and methods. Debugging them can be tricky because the actual code executed depends on the class of the object.</p>
<p><strong>a) Finding Which Method is Called</strong> * <code>sloop::s3_dispatch()</code> or <code>sloop::s4_dispatch()</code>: These functions from the <code>sloop</code> package are excellent for seeing the method dispatch path. * <code>methods()</code>: e.g., <code>methods(print)</code> shows all <code>print</code> methods. <code>methods(class = "lm")</code> shows all methods for <code>lm</code> objects. * <code>getS3method()</code> / <code>getMethod()</code>: To retrieve the actual code of a specific method.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("sloop") # If not already installed</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sloop)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co"># S3 Example</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>data_frame <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>])</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="fu">s3_dispatch</span>(<span class="fu">print</span>(data_frame))</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="co"># This will show:</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt; print.data.frame</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  * print.default</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the code for print.data.frame</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a><span class="co"># getS3method("print", "data.frame")</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a><span class="co"># S4 Example (requires a class and generic with methods)</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a><span class="fu">setClass</span>(<span class="st">"Person"</span>, <span class="at">slots =</span> <span class="fu">c</span>(<span class="at">name =</span> <span class="st">"character"</span>, <span class="at">age =</span> <span class="st">"numeric"</span>))</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a><span class="fu">setGeneric</span>(<span class="st">"display"</span>, <span class="cf">function</span>(object) <span class="fu">standardGeneric</span>(<span class="st">"display"</span>))</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a><span class="fu">setMethod</span>(<span class="st">"display"</span>, <span class="st">"Person"</span>, <span class="cf">function</span>(object) {</span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Name:"</span>, object<span class="sc">@</span>name, <span class="st">", Age:"</span>, object<span class="sc">@</span>age, <span class="st">"</span><span class="sc">\\</span><span class="st">n"</span>)</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>alice <span class="ot">&lt;-</span> <span class="fu">new</span>(<span class="st">"Person"</span>, <span class="at">name =</span> <span class="st">"Alice"</span>, <span class="at">age =</span> <span class="dv">30</span>)</span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a><span class="fu">s4_dispatch</span>(<span class="fu">display</span>(alice))</span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt; display,Person,ANY</span></span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the code for the method</span></span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a><span class="co"># getMethod("display", "Person")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>b) Debugging a Specific Method</strong> Once you’ve identified the method, you can use <code>debug()</code> or <code>browser()</code> on it: * <code>debug(getS3method("print", "data.frame"))</code> * Or, if it’s your own S4 method, you can put <code>browser()</code> directly in its source code.</p>
</section>
<section id="global-error-handling-options-optionserror-..." class="level3">
<h3 class="anchored" data-anchor-id="global-error-handling-options-optionserror-...">4. Global Error Handling Options: <code>options(error = ...)</code></h3>
<p>We saw <code>options(error = recover)</code>. Another useful one is <code>options(error = dump.frames)</code>. * <code>dump.frames</code> saves the call stack and environments to an object (default <code>last.dump</code>) when an error occurs. * You can then use <code>debugger()</code> to perform post-mortem debugging on this dump.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set dump.frames as the error handler</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">error =</span> dump.frames)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a function that will cause an error</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>error_function <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  a <span class="sc">+</span> b <span class="co"># This will error if b is a string</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Trigger an error</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="co"># error_function(5, "hello")</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Now, the dump is saved. You can inspect it:</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="co"># debugger(last.dump)</span></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="co"># This will start a browser-like session for the saved frames.</span></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a><span class="co"># To list saved dumps:</span></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a><span class="co"># ls(pattern = ".dump$")</span></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset error option</span></span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a><span class="co"># options(error = NULL)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is useful for non-interactive sessions (like batch scripts) where <code>recover</code> can’t be used directly. You can save the dump and analyze it later.</p>
<p><strong>Exercise 4.1: Using <code>recover()</code></strong></p>
<ol type="1">
<li>Set <code>options(error = recover)</code>.</li>
<li>Write a function <code>calculate_ratio(a, b)</code> that returns <code>a / b</code>.</li>
<li>Inside <code>calculate_ratio</code>, add a check: if <code>b</code> is zero, <code>stop("Division by zero!")</code>.</li>
<li>Call <code>calculate_ratio(10, 0)</code>.</li>
<li>When <code>recover</code> prompts you, enter the frame for <code>calculate_ratio</code>.</li>
<li>Inspect the values of <code>a</code> and <code>b</code>.</li>
<li>Exit <code>recover</code> and reset <code>options(error = NULL)</code>.</li>
</ol>
<div class="cell" data-exercise="ex4-1" data-solution_hidden="true">
<div>
<div id="webr-7" class="exercise-cell">

</div>
<script type="webr-7-contents">
eyJjb2RlIjoiXG4jIFNvbHV0aW9uIGZvciBFeGVyY2lzZSA0LjEgKGNvbmNlcHR1YWwsIGFzIHJlY292ZXIgaXMgaW50ZXJhY3RpdmUpXG4jIG9wdGlvbnMoZXJyb3IgPSByZWNvdmVyKSAjIFN0ZXAgMVxuXG5jYWxjdWxhdGVfcmF0aW8gPC0gZnVuY3Rpb24oYSwgYikgeyAjIFN0ZXAgMlxuICBpZiAoYiA9PSAwKSB7ICMgU3RlcCAzXG4gICAgc3RvcChcIkRpdmlzaW9uIGJ5IHplcm8hXCIpXG4gIH1cbiAgcmV0dXJuKGEgLyBiKVxufVxuXG4jIGNhbGN1bGF0ZV9yYXRpbygxMCwgMCkgIyBTdGVwIDRcbiMgQXQgdGhpcyBwb2ludCwgcmVjb3ZlcigpIHdvdWxkIGFjdGl2YXRlLlxuIyBVc2VyIHdvdWxkIHNlbGVjdCB0aGUgZnJhbWUgZm9yIGNhbGN1bGF0ZV9yYXRpby5cbiMgVGhlbiBpbnNwZWN0ICdhJyAoc2hvd3MgMTApIGFuZCAnYicgKHNob3dzIDApLlxuIyBUaGVuIGV4aXQgcmVjb3Zlci5cblxuIyBvcHRpb25zKGVycm9yID0gTlVMTCkgIyBTdGVwIDdcblxucHJpbnQoXCJFeGVyY2lzZSA0LjE6IENvbmNlcHR1YWwgc3RlcHMgZm9yIHVzaW5nIHJlY292ZXIoKSBkZXNjcmliZWQgYWJvdmUuXCIpXG5wcmludChcIlRvIHJ1biBpbnRlcmFjdGl2ZWx5OiB1bmNvbW1lbnQgb3B0aW9ucygpIGFuZCB0aGUgZnVuY3Rpb24gY2FsbCwgdGhlbiBydW4gaW4gYW4gUiBjb25zb2xlLlwiKSIsImF0dHIiOnsiZXZhbCI6dHJ1ZSwiZWRpdCI6dHJ1ZSwic29sdXRpb25faGlkZGVuIjp0cnVlLCJleGVyY2lzZSI6ImV4NC0xIn19
</script>
</div>
</div>
<p><strong>Exercise 4.2: Profiling with <code>profvis</code></strong></p>
<ol type="1">
<li>Create a function <code>generate_data(n_rows, n_cols)</code> that creates a data frame with <code>n_rows</code> and <code>n_cols</code>. Each cell should be a random number <code>runif(1)</code>.</li>
<li>Create another function <code>process_data(df)</code> that:
<ul>
<li>Calculates the mean of each column.</li>
<li>Calculates the sum of each row.</li>
<li>Does this in a loop 10 times (just to make it take a bit longer).</li>
</ul></li>
<li>Use <code>profvis</code> to profile calling <code>generate_data(1000, 100)</code> and then passing its result to <code>process_data()</code>.</li>
<li>Identify which parts of your functions take the most time.</li>
</ol>
<div class="cell" data-exercise="ex4-2" data-solution_hidden="true">
<div>
<div id="webr-8" class="exercise-cell">

</div>
<script type="webr-8-contents">
eyJjb2RlIjoiIyBsaWJyYXJ5KHByb2Z2aXMpICMgTm90IGF2YWlsYWJsZSBpbiB3ZWJyIGVudmlyb25tZW50IGZvciBkaXJlY3QgZXhlY3V0aW9uXG5cbiMgU29sdXRpb24gZm9yIEV4ZXJjaXNlIDQuMiAoY29uY2VwdHVhbCBmb3IgcHJvZnZpcylcbmdlbmVyYXRlX2RhdGEgPC0gZnVuY3Rpb24obl9yb3dzLCBuX2NvbHMpIHtcbiAgU3lzLnNsZWVwKDAuMSkgIyBTaW11bGF0ZSBzb21lIHdvcmtcbiAgbWF0cml4X2RhdGEgPC0gbWF0cml4KHJ1bmlmKG5fcm93cyAqIG5fY29scyksIG5yb3cgPSBuX3Jvd3MsIG5jb2wgPSBuX2NvbHMpXG4gIGRmIDwtIGFzLmRhdGEuZnJhbWUobWF0cml4X2RhdGEpXG4gIHJldHVybihkZilcbn1cblxucHJvY2Vzc19kYXRhIDwtIGZ1bmN0aW9uKGRmKSB7XG4gIGNvbF9tZWFuc19saXN0IDwtIGxpc3QoKVxuICByb3dfc3Vtc19saXN0IDwtIGxpc3QoKVxuICBmb3IgKGkgaW4gMToxMCkgeyAjIExvb3AgdG8gbWFrZSBpdCB0YWtlIGxvbmdlclxuICAgIFN5cy5zbGVlcCgwLjA1KSAjIFNpbXVsYXRlIHdvcmtcbiAgICBjb2xfbWVhbnNfbGlzdFtbaV1dIDwtIGNvbE1lYW5zKGRmLCBuYS5ybSA9IFRSVUUpXG4gICAgcm93X3N1bXNfbGlzdFtbaV1dIDwtIHJvd1N1bXMoZGYsIG5hLnJtID0gVFJVRSlcbiAgfVxuICByZXR1cm4obGlzdChjb2xfbWVhbnMgPSBjb2xfbWVhbnNfbGlzdCwgcm93X3N1bXMgPSByb3dfc3Vtc19saXN0KSlcbn1cblxuIyBDb25jZXB0dWFsIHByb2Z2aXMgdXNhZ2U6XG4jIHByb2Z2aXMoe1xuIyAgIG15X2RhdGEgPC0gZ2VuZXJhdGVfZGF0YSgxMDAwLCAxMDApXG4jICAgcHJvY2Vzc2VkX3Jlc3VsdHMgPC0gcHJvY2Vzc19kYXRhKG15X2RhdGEpXG4jIH0pXG5cbnByaW50KFwiRXhlcmNpc2UgNC4yOiBGdW5jdGlvbnMgZGVmaW5lZC4gVXNlIHByb2Z2aXMgaW4gYSBsb2NhbCBSIGVudmlyb25tZW50IHRvIHNlZSB0aGUgcHJvZmlsZS5cIilcbnByaW50KFwiU2ltdWxhdGVkIHdvcmsgd2l0aCBTeXMuc2xlZXAoKSBhZGRlZCBmb3IgZGVtb25zdHJhdGlvbi5cIilcblxuIyBFeGFtcGxlIG9mIHJ1bm5pbmcgd2l0aG91dCBwcm9mdmlzIGZvciB3ZWJyXG5teV9kYXRhX2V4NF8yIDwtIGdlbmVyYXRlX2RhdGEoMTAwLCAxMCkgIyBTbWFsbGVyIGZvciB3ZWJyXG5wcm9jZXNzZWRfcmVzdWx0c19leDRfMiA8LSBwcm9jZXNzX2RhdGEobXlfZGF0YV9leDRfMilcbnByaW50KFwiU2FtcGxlIHJ1biBjb21wbGV0ZWQgKHdpdGhvdXQgYWN0dWFsIHByb2ZpbGluZyBkaXNwbGF5KS5cIikiLCJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWUsInNvbHV0aW9uX2hpZGRlbiI6dHJ1ZSwiZXhlcmNpc2UiOiJleDQtMiJ9fQ==
</script>
</div>
</div>
<hr>
</section>
</section>
<section id="part-3-specialized-debugging-and-best-practices" class="level2">
<h2 class="anchored" data-anchor-id="part-3-specialized-debugging-and-best-practices">Part 3: Specialized Debugging and Best Practices</h2>
<hr>
</section>
<section id="lesson-5-debugging-in-specific-contexts" class="level2">
<h2 class="anchored" data-anchor-id="lesson-5-debugging-in-specific-contexts">Lesson 5: Debugging in Specific Contexts</h2>
<p>Debugging challenges can vary significantly depending on the R environment or framework you’re working with. This lesson explores common issues and tailored strategies for Shiny applications, R Markdown/Quarto documents, and custom R packages.</p>
<section id="debugging-shiny-applications" class="level3">
<h3 class="anchored" data-anchor-id="debugging-shiny-applications">1. Debugging Shiny Applications</h3>
<p>Shiny apps introduce reactivity, which can make debugging less straightforward. Errors might stem from server logic, UI definitions, or the interaction between them.</p>
<p><strong>Common Issues:</strong> * <strong>Reactivity Problems:</strong> Outputs not updating, observers firing unexpectedly, or infinite reactive loops. * <strong>Server/UI Disconnects:</strong> UI elements not correctly linked to server-side logic or vice-versa. * <strong>Slow Performance:</strong> Bottlenecks in reactive expressions or data processing. * <strong>Silent Errors:</strong> Errors within reactive expressions might not always stop the app but can lead to incorrect behavior.</p>
<p><strong>Debugging Tools &amp; Techniques:</strong> * <strong><code>browser()</code> in Server Logic:</strong> Place <code>browser()</code> inside <code>reactive()</code> expressions, <code>observeEvent()</code>, or <code>renderPlot()</code> functions to inspect values and flow at specific points.</p>
<pre><code>::: {.cell}

```{.r .cell-code}
# server.R or app.R (server part)
server &lt;- function(input, output) {
  data_reactive &lt;- reactive({
    # browser() # Uncomment to debug this reactive expression
    req(input$my_slider)
    data_frame &lt;- data.frame(x = 1:input$my_slider, y = rnorm(input$my_slider))
    # print(head(data_frame)) # Useful for quick checks
    return(data_frame)
  })

  output$my_plot &lt;- renderPlot({
    df &lt;- data_reactive()
    # browser() # Uncomment to inspect df before plotting
    plot(df$x, df$y)
  })
}
```
:::</code></pre>
<ul>
<li><p><strong><code>print()</code> Statements:</strong> Use <code>print()</code> or <code>cat()</code> within reactive expressions to output values to the R console. Remember that these will execute every time the reactive expression re-evaluates.</p></li>
<li><p><strong><code>isolate()</code>:</strong> Use <code>isolate()</code> to read a reactive value without creating a dependency, which can help pinpoint unnecessary re-evaluations.</p></li>
<li><p><strong><code>shiny::reactiveLog()</code> and <code>reactlog</code> package:</strong> These tools provide a visual representation of the reactive graph and its execution, helping to understand dependencies and data flow. <code>reactlog::reactlog_show()</code> or <code>shiny::showReactLog()</code> can be very insightful.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># At the top of your app.R or global.R</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co"># options(shiny.reactlog = TRUE) # For built-in reactive log</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Or using the reactlog package (recommended)</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("reactlog")</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co"># library(reactlog)</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co"># reactlog_enable()</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co"># After running the app and interacting with it:</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="co"># reactlog_show() # Opens the visualization</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p><strong>Shiny’s Built-in Debugging Aids:</strong> Shiny often prints useful information to the R console, including error messages that might not be visible in the app’s UI.</p></li>
<li><p><strong>RStudio’s Shiny Debugging Tools:</strong> RStudio provides features like direct inspection of reactive values when the app is running.</p></li>
</ul>
<p><strong>Tips for Debugging Shiny Apps:</strong> * <strong>Isolate Components:</strong> Test reactive expressions or modules individually if possible. * <strong>Simplify:</strong> If an app is complex, try to reproduce the issue in a minimal version. * <strong>Check Inputs:</strong> Ensure <code>input</code> values are what you expect (e.g., correct type, not NULL when <code>req()</code> is needed).</p>
</section>
<section id="debugging-r-markdown-and-quarto-documents" class="level3">
<h3 class="anchored" data-anchor-id="debugging-r-markdown-and-quarto-documents">2. Debugging R Markdown and Quarto Documents</h3>
<p>When knitting R Markdown (<code>.Rmd</code>) or rendering Quarto (<code>.qmd</code>) documents, errors often occur within code chunks.</p>
<p><strong>Common Issues:</strong> * <strong>Code Chunk Errors:</strong> An R error in a specific chunk stops the rendering process. * <strong>Environment Conflicts:</strong> Variables or functions defined in one chunk might not be available or might be overwritten in another, depending on chunk options. * <strong>Rendering Problems:</strong> Issues with output formats (HTML, PDF, Word), especially with LaTeX for PDF output. * <strong>Package/Dependency Issues:</strong> A required package might not be installed or loaded in the environment where the document is rendered.</p>
<p><strong>Debugging Tools &amp; Techniques:</strong> * <strong>Run Chunks Individually:</strong> Execute code chunks one by one within RStudio (or your IDE) to pinpoint where an error occurs. * <strong>Chunk Option <code>error = TRUE</code>:</strong> <code>knitr::opts_chunk$set(error = TRUE)</code> (globally) or <code>{r error=TRUE}` (for a specific chunk) will allow the document to render even if a chunk has an error, printing the error message in the output. This is useful for identifying multiple errors at once. *   **Chunk Option `debug = TRUE`:**</code>{r debug=TRUE}<code>(for a specific chunk) can sometimes provide more detailed debugging information or invoke a debugger, though its behavior can vary. *   **Inspect Intermediate Files:** For complex issues, especially with PDF output, inspect the intermediate</code>.md<code>or</code>.tex<code>files generated by</code>knitr<code>or Quarto. This can reveal formatting or LaTeX-specific errors.     *   Use</code>keep_md: true<code>or</code>keep_tex: true<code>in the YAML header. *   **Simplify the Document:** Comment out sections or chunks to isolate the problematic part. *   **Check</code>sessionInfo()`:** Ensure that the R session rendering the document has all necessary packages at the correct versions.</p>
<p><strong>Tips for Debugging <code>.Rmd</code>/<code>.qmd</code> Files:</strong> * <strong>Chunk Labels:</strong> Always use unique and descriptive labels for your code chunks. * <strong>Cache with Caution:</strong> While caching (<code>cache = TRUE</code>) speeds up rendering, it can sometimes hide issues or use stale results. Clear the cache if you suspect problems. * <strong>Small, Focused Chunks:</strong> Break down long computations into smaller, more manageable chunks.</p>
</section>
<section id="debugging-custom-r-packages" class="level3">
<h3 class="anchored" data-anchor-id="debugging-custom-r-packages">3. Debugging Custom R Packages</h3>
<p>Developing R packages introduces its own set of debugging challenges, often related to namespaces, documentation, or the build/check process.</p>
<p><strong>Common Issues:</strong> * <strong>Namespace Errors:</strong> Functions not being exported or imported correctly (<code>Error: object 'X' not found</code> when it should be available). * <strong>Documentation Mismatches:</strong> Discrepancies between function arguments in code and in <code>.Rd</code> files (often caught by <code>R CMD check</code>). * <strong>Failing <code>R CMD check</code>:</strong> Various warnings or errors related to coding standards, examples, tests, or vignette building. * <strong>Test Failures:</strong> Unit tests in <code>tests/testthat/</code> not passing.</p>
<p><strong>Debugging Tools &amp; Techniques:</strong> * <strong><code>devtools::load_all()</code> (or <code>pkgload::load_all()</code>):</strong> This is the most crucial tool. It simulates package installation and loading, making all exported and internal functions available for interactive testing in the console. Use it frequently during development. * <strong><code>devtools::check()</code>:</strong> Runs <code>R CMD check</code>, which performs a comprehensive suite of checks on your package. Address all errors, warnings, and notes. * <strong><code>devtools::test()</code> (or <code>testthat::test_local()</code>):</strong> Runs your unit tests. Use <code>browser()</code> within your test files or the functions being tested to debug failures. * <strong>RStudio’s Build Pane:</strong> Provides convenient buttons for <code>Load All</code>, <code>Test Package</code>, and <code>Check Package</code>. * <strong><code>browser()</code> in Package Functions:</strong> You can place <code>browser()</code> directly into your package’s R functions. After <code>devtools::load_all()</code>, calling the function will trigger the debugger. * <strong>Debugging Exported vs.&nbsp;Internal Functions:</strong> Remember that internal functions (not exported) are accessed with <code>packageName:::functionName</code>, while exported ones are <code>packageName::functionName</code> or directly after <code>library(packageName)</code>.</p>
<p><strong>Tips for Debugging Packages:</strong> * <strong>Iterative Development:</strong> <code>Load All</code> and test small changes frequently. * <strong>Read <code>R CMD check</code> Output Carefully:</strong> The messages, even notes, often point to important issues or best practices. * <strong>Use <code>roxygen2</code>:</strong> For generating documentation and managing the <code>NAMESPACE</code> file. This reduces manual errors. * <strong>Write Comprehensive Unit Tests:</strong> Good tests are your first line of defense and a great debugging aid.</p>
<p><strong>Exercise 5.1: Debugging a (Conceptual) Shiny App</strong></p>
<p>Imagine a Shiny app with an input <code>sliderInput("num", "Choose a number", 1, 10, 5)</code> and an output that should display <code>input$num * 2</code>. The output is not updating.</p>
<ol type="1">
<li>Where would you first place <code>browser()</code> or <code>print()</code> statements to investigate?</li>
<li>What are possible reasons for the output not updating?</li>
</ol>
<div class="cell" data-exercise="ex5-1" data-solution_hidden="true">
<div>
<div id="webr-9" class="exercise-cell">

</div>
<script type="webr-9-contents">
eyJjb2RlIjoiXG4jIENvbmNlcHR1YWwgU29sdXRpb24gZm9yIEV4ZXJjaXNlIDUuMVxuXG4jIDEuIFdoZXJlIHRvIHBsYWNlIGJyb3dzZXIoKSBvciBwcmludCgpOlxuIyAgICAtIEluc2lkZSB0aGUgcmVhY3RpdmUgZXhwcmVzc2lvbiB0aGF0IGNhbGN1bGF0ZXMgYGlucHV0JG51bSAqIDJgLlxuIyAgICAtIEluc2lkZSB0aGUgcmVuZGVyIGZ1bmN0aW9uIGZvciB0aGUgb3V0cHV0IHRoYXQgZGlzcGxheXMgdGhlIHJlc3VsdC5cbiMgICAgRXhhbXBsZTpcbiMgICAgc2VydmVyIDwtIGZ1bmN0aW9uKGlucHV0LCBvdXRwdXQpIHtcbiMgICAgICBvdXRwdXQkZG91YmxlZF92YWx1ZSA8LSByZW5kZXJUZXh0KHtcbiMgICAgICAgIGN1cnJlbnRfbnVtIDwtIGlucHV0JG51bVxuIyAgICAgICAgcHJpbnQocGFzdGUoXCJTbGlkZXIgdmFsdWU6XCIsIGN1cnJlbnRfbnVtKSkgIyBQcmludCBzdGF0ZW1lbnRcbiMgICAgICAgICMgYnJvd3NlcigpICMgT3IgYnJvd3NlcigpXG4jICAgICAgICByZXN1bHQgPC0gY3VycmVudF9udW0gKiAyXG4jICAgICAgICBwcmludChwYXN0ZShcIlJlc3VsdDpcIiwgcmVzdWx0KSlcbiMgICAgICAgIHJldHVybihyZXN1bHQpXG4jICAgICAgfSlcbiMgICAgfVxuXG4jIDIuIFBvc3NpYmxlIHJlYXNvbnMgZm9yIHRoZSBvdXRwdXQgbm90IHVwZGF0aW5nOlxuIyAgICAtIFRoZSBvdXRwdXQgVUkgZWxlbWVudCBpcyBub3QgY29ycmVjdGx5IGRlZmluZWQgb3IgbmFtZWQuXG4jICAgIC0gVGhlIGByZW5kZXJUZXh0YCAob3Igc2ltaWxhcikgZnVuY3Rpb24gaXMgbm90IGNvcnJlY3RseSBhc3NpZ25lZCB0byBgb3V0cHV0JGRvdWJsZWRfdmFsdWVgLlxuIyAgICAtIFRoZSByZWFjdGl2ZSBleHByZXNzaW9uIGlzIG5vdCBhY3R1YWxseSByZS1ldmFsdWF0aW5nIChlLmcuLCBgaW5wdXQkbnVtYCBpcyBub3QgYmVpbmcgcmVhZCByZWFjdGl2ZWx5KS5cbiMgICAgLSBBbiBlcnJvciBpcyBvY2N1cnJpbmcgc2lsZW50bHkgd2l0aGluIHRoZSByZWFjdGl2ZSBleHByZXNzaW9uIGJlZm9yZSB0aGUgbmV3IHZhbHVlIGlzIHJldHVybmVkLlxuIyAgICAtIFRoZSBVSSBpcyBub3QgY29ycmVjdGx5IGRpc3BsYXlpbmcgdGhlIG91dHB1dCAoZS5nLiwgd3Jvbmcgb3V0cHV0IGZ1bmN0aW9uIHVzZWQgaW4gVUkgbGlrZSBgdGV4dE91dHB1dGAgdnMgYHZlcmJhdGltVGV4dE91dHB1dGApLlxuXG5wcmludChcIkV4ZXJjaXNlIDUuMTogQ29uY2VwdHVhbCBkZWJ1Z2dpbmcgc3RlcHMgZm9yIGEgU2hpbnkgYXBwIGRlc2NyaWJlZCBhYm92ZS5cIikiLCJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWUsInNvbHV0aW9uX2hpZGRlbiI6dHJ1ZSwiZXhlcmNpc2UiOiJleDUtMSJ9fQ==
</script>
</div>
</div>
<p><strong>Exercise 5.2: Debugging an R Markdown Chunk</strong></p>
<p>An R Markdown document has a chunk that loads data and then tries to plot it. The plot is not appearing, and knitting stops with an error “object ‘my_data’ not found” in the plotting chunk.</p>
<ol type="1">
<li>What is the most likely cause related to chunk execution order or environment?</li>
<li>How would you verify this and fix it?</li>
</ol>
<div class="cell" data-exercise="ex5-2" data-solution_hidden="true">
<div>
<div id="webr-10" class="exercise-cell">

</div>
<script type="webr-10-contents">
eyJjb2RlIjoiXG4jIENvbmNlcHR1YWwgU29sdXRpb24gZm9yIEV4ZXJjaXNlIDUuMlxuXG4jIDEuIE1vc3QgbGlrZWx5IGNhdXNlOlxuIyAgICAtIFRoZSBjaHVuayB0aGF0IGxvYWRzIGBteV9kYXRhYCB3YXMgbm90IGV4ZWN1dGVkIGJlZm9yZSB0aGUgY2h1bmsgdGhhdCB0cmllcyB0byBwbG90IGBteV9kYXRhYC5cbiMgICAgLSBUaGUgY2h1bmsgbG9hZGluZyBgbXlfZGF0YWAgbWlnaHQgaGF2ZSBhbiBlcnJvciBpdHNlbGYsIHByZXZlbnRpbmcgYG15X2RhdGFgIGZyb20gYmVpbmcgY3JlYXRlZC5cbiMgICAgLSBgbXlfZGF0YWAgd2FzIGNyZWF0ZWQgaW4gYSBjaHVuaywgYnV0IHRoZW4gcmVtb3ZlZCBvciBtb2RpZmllZCBiZWZvcmUgdGhlIHBsb3R0aW5nIGNodW5rIChsZXNzIGxpa2VseSBmb3Igc2ltcGxlIFwibm90IGZvdW5kXCIpLlxuIyAgICAtIENodW5rIG9wdGlvbnMgbGlrZSBgZXZhbD1GQUxTRWAgb24gdGhlIGRhdGEgbG9hZGluZyBjaHVuaywgb3IgYSBkaWZmZXJlbnQgYGVuZ2luZWAgdGhhdCBkb2Vzbid0IHNoYXJlIHRoZSBSIGVudmlyb25tZW50LlxuXG4jIDIuIEhvdyB0byB2ZXJpZnkgYW5kIGZpeDpcbiMgICAgLSAqKlZlcmlmeToqKlxuIyAgICAgIC0gUnVuIHRoZSBkYXRhIGxvYWRpbmcgY2h1bmsgbWFudWFsbHkgaW4gdGhlIFIgY29uc29sZSBvciBSU3R1ZGlvLlxuIyAgICAgIC0gQ2hlY2sgaWYgYG15X2RhdGFgIGV4aXN0cyBpbiB0aGUgZW52aXJvbm1lbnQgYWZ0ZXIgcnVubmluZyB0aGUgbG9hZGluZyBjaHVuayAoYGxzKClgLCBgZXhpc3RzKFwibXlfZGF0YVwiKWApLlxuIyAgICAgIC0gQ2hlY2sgZm9yIGFueSBlcnJvciBtZXNzYWdlcyB3aGVuIHJ1bm5pbmcgdGhlIGRhdGEgbG9hZGluZyBjaHVuay5cbiMgICAgICAtIEVuc3VyZSB0aGUgcGxvdHRpbmcgY2h1bmsgY29tZXMgKmFmdGVyKiB0aGUgZGF0YSBsb2FkaW5nIGNodW5rIGluIHRoZSBkb2N1bWVudC5cbiMgICAgLSAqKkZpeDoqKlxuIyAgICAgIC0gRW5zdXJlIHRoZSBkYXRhIGxvYWRpbmcgY2h1bmsgaXMgY29ycmVjdGx5IHdyaXR0ZW4gYW5kIGV4ZWN1dGVzIHdpdGhvdXQgZXJyb3JzIGJlZm9yZSB0aGUgcGxvdHRpbmcgY2h1bmsuXG4jICAgICAgLSBNYWtlIHN1cmUgYGV2YWw9VFJVRWAgKHdoaWNoIGlzIGRlZmF1bHQpIGZvciB0aGUgZGF0YSBsb2FkaW5nIGNodW5rLlxuIyAgICAgIC0gSWYgdXNpbmcgUlN0dWRpbywgdHJ5IFwiUnVuIEFsbCBDaHVua3MgQWJvdmVcIiBmb3IgdGhlIHBsb3R0aW5nIGNodW5rLlxuXG5wcmludChcIkV4ZXJjaXNlIDUuMjogQ29uY2VwdHVhbCBkZWJ1Z2dpbmcgc3RlcHMgZm9yIGFuIFIgTWFya2Rvd24gZG9jdW1lbnQgZGVzY3JpYmVkIGFib3ZlLlwiKSIsImF0dHIiOnsiZXZhbCI6dHJ1ZSwiZWRpdCI6dHJ1ZSwic29sdXRpb25faGlkZGVuIjp0cnVlLCJleGVyY2lzZSI6ImV4NS0yIn19
</script>
</div>
</div>
<hr>
</section>
</section>
<section id="lesson-6-preventative-measures-and-writing-debuggable-code" class="level2">
<h2 class="anchored" data-anchor-id="lesson-6-preventative-measures-and-writing-debuggable-code">Lesson 6: Preventative Measures and Writing Debuggable Code</h2>
<p>While knowing how to debug is crucial, writing code that is less prone to bugs and easier to debug in the first place can save significant time and effort. This lesson focuses on proactive strategies.</p>
<section id="unit-testing-with-testthat" class="level3">
<h3 class="anchored" data-anchor-id="unit-testing-with-testthat">1. Unit Testing with <code>testthat</code></h3>
<p>Unit tests are small pieces of code that verify that individual functions (units) of your code work as expected. The <code>testthat</code> package is the standard for unit testing in R.</p>
<p><strong>Importance of Unit Tests:</strong> * <strong>Catch Bugs Early:</strong> Detect regressions (when new changes break existing functionality) immediately. * <strong>Facilitate Refactoring:</strong> Allow you to change code internals with confidence, as long as tests still pass. * <strong>Serve as Documentation:</strong> Tests demonstrate how your functions are intended to be used and what their expected outputs are. * <strong>Improve Code Design:</strong> Thinking about how to test a function often leads to better, more modular design.</p>
<p><strong>Basic Structure of <code>testthat</code> Tests:</strong> Tests are typically organized in files within the <code>tests/testthat/</code> directory of a package (e.g., <code>tests/testthat/test-my_function.R</code>).</p>
<ul>
<li><strong><code>test_that("description of what is being tested", { ... })</code>:</strong> Defines a block of related tests.</li>
<li><strong>Expectation Functions (<code>expect_*</code>)</strong>: These functions make assertions about your code.
<ul>
<li><code>expect_equal(object, expected_value)</code>: Checks for exact equality (for numbers, considers tolerance).</li>
<li><code>expect_identical(object, expected_value)</code>: Checks for exact, bit-for-bit equality.</li>
<li><code>expect_true(condition)</code>, <code>expect_false(condition)</code>: Checks if a condition is TRUE or FALSE.</li>
<li><code>expect_error(expression_that_should_error, regexp_for_error_message)</code>: Checks if code throws an error.</li>
<li><code>expect_warning(...)</code>, <code>expect_message(...)</code>, <code>expect_output(...)</code>.</li>
<li><code>expect_s3_class(object, "class_name")</code>, <code>expect_s4_class(...)</code>.</li>
<li>And many more!</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: tests/testthat/test-addition.R</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Source the function to be tested (if not in a package being loaded via devtools)</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co"># source("../../R/addition.R") # Assuming your function is in R/addition.R</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co"># A simple function to test</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>add_numbers <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(x) <span class="sc">||</span> <span class="sc">!</span><span class="fu">is.numeric</span>(y)) {</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Inputs must be numeric"</span>)</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> y)</span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(testthat)</span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">"add_numbers works with positive integers"</span>, {</span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">add_numbers</span>(<span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">5</span>)</span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">add_numbers</span>(<span class="dv">100</span>, <span class="dv">200</span>), <span class="dv">300</span>)</span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">"add_numbers works with zero and negative numbers"</span>, {</span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">add_numbers</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="dv">5</span>)</span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">add_numbers</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>), <span class="dv">0</span>)</span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">add_numbers</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="sc">-</span><span class="dv">5</span>), <span class="sc">-</span><span class="dv">10</span>)</span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">"add_numbers handles non-numeric input"</span>, {</span>
<span id="cb58-28"><a href="#cb58-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_error</span>(<span class="fu">add_numbers</span>(<span class="st">"a"</span>, <span class="dv">5</span>), <span class="st">"Inputs must be numeric"</span>)</span>
<span id="cb58-29"><a href="#cb58-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_error</span>(<span class="fu">add_numbers</span>(<span class="dv">5</span>, <span class="st">"b"</span>), <span class="st">"Inputs must be numeric"</span>)</span>
<span id="cb58-30"><a href="#cb58-30" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb58-31"><a href="#cb58-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-32"><a href="#cb58-32" aria-hidden="true" tabindex="-1"></a><span class="co"># To run tests for a package:</span></span>
<span id="cb58-33"><a href="#cb58-33" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::test()</span></span>
<span id="cb58-34"><a href="#cb58-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-35"><a href="#cb58-35" aria-hidden="true" tabindex="-1"></a><span class="co"># To run a specific test file:</span></span>
<span id="cb58-36"><a href="#cb58-36" aria-hidden="true" tabindex="-1"></a><span class="co"># testthat::test_file("tests/testthat/test-addition.R")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Running Tests:</strong> * For packages: <code>devtools::test()</code> or RStudio’s Build pane. * For individual files: <code>testthat::test_file("path/to/test-file.R")</code>.</p>
</section>
<section id="defensive-programming" class="level3">
<h3 class="anchored" data-anchor-id="defensive-programming">2. Defensive Programming</h3>
<p>Defensive programming involves writing code that anticipates potential problems and handles them gracefully, rather than assuming inputs and states will always be perfect.</p>
<p><strong>Techniques:</strong> * <strong>Assertions (<code>stopifnot()</code>):</strong> <code>stopifnot()</code> checks if its arguments are all TRUE. If not, it throws an error. It’s good for preconditions at the beginning of a function.</p>
<pre><code>::: {.cell}

```{.r .cell-code}
calculate_mean_positive &lt;- function(vec) {
  stopifnot(is.numeric(vec), length(vec) &gt; 0, all(vec &gt; 0))
  mean(vec)
}

# calculate_mean_positive(c(1, 2, -3)) # This will error due to all(vec &gt; 0) being false
# calculate_mean_positive(c())       # This will error due to length(vec) &gt; 0 being false
print(calculate_mean_positive(c(1, 2, 3))) # This works
```

::: {.cell-output .cell-output-stdout}

```
[1] 2
```


:::
:::</code></pre>
<ul>
<li><p><strong>Input Validation (Checking Arguments):</strong> Explicitly check function arguments for type, class, length, range, etc., and provide informative error messages if they are invalid.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>create_greeting <span class="ot">&lt;-</span> <span class="cf">function</span>(name, <span class="at">language =</span> <span class="st">"en"</span>) {</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.character</span>(name) <span class="sc">||</span> <span class="fu">length</span>(name) <span class="sc">!=</span> <span class="dv">1</span>) {</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"`name` must be a single string."</span>, <span class="at">call. =</span> <span class="cn">FALSE</span>)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>language <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"en"</span>, <span class="st">"es"</span>)) {</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"`language` must be 'en' or 'es'."</span>, <span class="at">call. =</span> <span class="cn">FALSE</span>)</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (language <span class="sc">==</span> <span class="st">"en"</span>) <span class="fu">paste</span>(<span class="st">"Hello,"</span>, name)</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">paste</span>(<span class="st">"Hola,"</span>, name)</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">create_greeting</span>(<span class="st">"Alice"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello, Alice"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print(create_greeting("Bob", "fr")) # Errors</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>assertthat</code> package provides more expressive assertion functions (e.g., <code>assert_that(is.number(x))</code>).</p></li>
<li><p><strong>Graceful Failure:</strong> Instead of just erroring, sometimes functions can return a specific value (e.g., <code>NA</code>, <code>NULL</code>, an empty data frame) or issue a warning for non-critical issues.</p></li>
<li><p><strong>Clear Error Messages:</strong> Make error messages informative. Tell the user <em>what</em> went wrong, <em>why</em>, and potentially <em>how to fix it</em>.</p></li>
</ul>
</section>
<section id="code-style-and-readability" class="level3">
<h3 class="anchored" data-anchor-id="code-style-and-readability">3. Code Style and Readability</h3>
<p>Readable code is easier to understand, maintain, and debug (by yourself and others).</p>
<p><strong>Key Principles:</strong> * <strong>Consistent Style:</strong> Follow a style guide (e.g., the <a href="https://style.tidyverse.org/">tidyverse style guide</a>). Use linters (like the <code>lintr</code> package) to check and enforce style. * <strong>Meaningful Names:</strong> Choose descriptive names for variables, functions, and arguments. Avoid overly short or cryptic names. * Good: <code>calculate_average_income</code>, <code>customer_data</code> * Less good: <code>avginc</code>, <code>df1</code> * <strong>Effective Commenting:</strong> Comments should explain the “why” (the intent or logic), not just the “what” (which should be clear from the code itself). Comment complex sections or non-obvious logic. * <strong>Modularity (Small Functions):</strong> Break down complex tasks into smaller, single-purpose functions. Each function should do one thing well. This makes them easier to test and debug. * <strong>Limit Side Effects:</strong> Functions are easiest to reason about when they don’t modify objects outside their own environment (i.e., they don’t have side effects). Prefer functions that take inputs and return outputs. * <strong>DRY (Don’t Repeat Yourself):</strong> If you find yourself copying and pasting code, consider writing a function instead. * <strong>Whitespace:</strong> Use whitespace (blank lines, indentation) to structure code visually and improve readability.</p>
<p><strong>Exercise 6.1: Writing a <code>testthat</code> Test</strong></p>
<p>Given the following function: <code>trim_vector &lt;- function(x, n = 1) { x[(n+1):(length(x)-n)] }</code></p>
<ol type="1">
<li>Write at least two <code>test_that()</code> blocks for this function.</li>
<li>Include tests for valid inputs and edge cases (e.g., what if <code>n</code> is too large? What if <code>x</code> is short?).</li>
</ol>
<div class="cell" data-exercise="ex6-1" data-solution_hidden="true">
<div>
<div id="webr-11" class="exercise-cell">

</div>
<script type="webr-11-contents">
eyJjb2RlIjoiXG50cmltX3ZlY3RvciA8LSBmdW5jdGlvbih4LCBuID0gMSkge1xuICBpZiAobiA8IDApIHN0b3AoXCJgbmAgbXVzdCBiZSBub24tbmVnYXRpdmVcIilcbiAgbGVuX3ggPC0gbGVuZ3RoKHgpXG4gIHN0YXJ0X2luZGV4IDwtIG4gKyAxXG4gIGVuZF9pbmRleCA8LSBsZW5feCAtIG5cbiAgaWYgKHN0YXJ0X2luZGV4ID4gZW5kX2luZGV4ICsgMSkgeyAjIEFsbG93cyBlbXB0eSB2ZWN0b3IgaWYgbiBpcyBsYXJnZSBlbm91Z2ggdG8gdHJpbSBldmVyeXRoaW5nXG4gICAgICByZXR1cm4oeFswXSkgIyBSZXR1cm4gZW1wdHkgdmVjdG9yIG9mIHNhbWUgdHlwZVxuICB9XG4gIHJldHVybih4W3N0YXJ0X2luZGV4OmVuZF9pbmRleF0pXG59XG5cbnRlc3RfdGhhdChcInRyaW1fdmVjdG9yIHdvcmtzIHdpdGggYmFzaWMgdmFsaWQgaW5wdXRzXCIsIHtcbiAgZXhwZWN0X2VxdWFsKHRyaW1fdmVjdG9yKDE6MTAsIG4gPSAxKSwgMjo5KVxuICBleHBlY3RfZXF1YWwodHJpbV92ZWN0b3IobGV0dGVyc1sxOjVdLCBuID0gMiksIGxldHRlcnNbM10pXG4gIGV4cGVjdF9lcXVhbCh0cmltX3ZlY3RvcihjKFRSVUUsIEZBTFNFLCBUUlVFLCBGQUxTRSksIG4gPSAwKSwgYyhUUlVFLCBGQUxTRSwgVFJVRSwgRkFMU0UpKVxufSlcblxudGVzdF90aGF0KFwidHJpbV92ZWN0b3IgaGFuZGxlcyBlZGdlIGNhc2VzXCIsIHtcbiAgZXhwZWN0X2VxdWFsKHRyaW1fdmVjdG9yKDE6NSwgbiA9IDIpLCAzKSAjIFRyaW1zIHRvIGEgc2luZ2xlIGVsZW1lbnRcbiAgZXhwZWN0X2VxdWFsKGxlbmd0aCh0cmltX3ZlY3RvcigxOjUsIG4gPSAzKSksIDApICMgbiBpcyBsYXJnZSwgcmVzdWx0cyBpbiBlbXB0eSB2ZWN0b3JcbiAgZXhwZWN0X2VxdWFsKGxlbmd0aCh0cmltX3ZlY3RvcigxOjIsIG4gPSAxKSksIDApICMgVHJpbXMgZXZlcnl0aGluZ1xuICBleHBlY3RfZXF1YWwodHJpbV92ZWN0b3IoYygpLCBuID0gMSksIGMoKSkgIyBFbXB0eSBpbnB1dFxuICBleHBlY3RfZXJyb3IodHJpbV92ZWN0b3IoMTo1LCBuID0gLTEpKSAjIEludmFsaWQgblxufSlcblxucHJpbnQoXCJFeGVyY2lzZSA2LjE6IHRlc3R0aGF0IHRlc3RzIGZvciB0cmltX3ZlY3RvciBkZWZpbmVkIGFuZCBjb25jZXB0dWFsbHkgcnVuLlwiKSIsImF0dHIiOnsiZXZhbCI6dHJ1ZSwiZWRpdCI6dHJ1ZSwic29sdXRpb25faGlkZGVuIjp0cnVlLCJleGVyY2lzZSI6ImV4Ni0xIn19
</script>
</div>
</div>
<p><strong>Exercise 6.2: Improving Code Readability</strong></p>
<p>Consider this poorly written function: <code>f &lt;- function(d, c1, c2, v) { d_s &lt;- d[d[[c1]] &gt; v, ]; aggregate(d_s[[c2]] ~ d_s[[c1]], FUN=mean) }</code></p>
<ol type="1">
<li>Rewrite this function with more descriptive names and better formatting.</li>
<li>Add comments explaining its purpose and arguments.</li>
<li>Add basic input validation.</li>
</ol>
<div class="cell" data-exercise="ex6-2" data-solution_hidden="true">
<div>
<div id="webr-12" class="exercise-cell">

</div>
<script type="webr-12-contents">
eyJjb2RlIjoiXG4jIE9yaWdpbmFsIGZ1bmN0aW9uOlxuIyBmIDwtIGZ1bmN0aW9uKGQsIGMxLCBjMiwgdikgeyBkX3MgPC0gZFtkW1tjMV1dID4gdiwgXTsgYWdncmVnYXRlKGRfc1tbYzJdXSB+IGRfc1tbYzFdXSwgRlVOPW1lYW4pIH1cblxuIyBSZXdyaXR0ZW4gZnVuY3Rpb246XG5jYWxjdWxhdGVfbWVhbl9ieV9ncm91cF9maWx0ZXJlZCA8LSBmdW5jdGlvbihkYXRhLCBncm91cF9jb2xfbmFtZSwgdmFsdWVfY29sX25hbWUsIGZpbHRlcl90aHJlc2hvbGQpIHtcbiAgIyBDYWxjdWxhdGVzIHRoZSBtZWFuIG9mICd2YWx1ZV9jb2xfbmFtZScgZm9yIGVhY2ggZ3JvdXAgaW4gJ2dyb3VwX2NvbF9uYW1lJyxcbiAgIyBhZnRlciBmaWx0ZXJpbmcgJ2RhdGEnIHdoZXJlICdncm91cF9jb2xfbmFtZScgaXMgZ3JlYXRlciB0aGFuICdmaWx0ZXJfdGhyZXNob2xkJy5cbiAgIyBcbiAgIyBBcmdzOlxuICAjICAgZGF0YTogQSBkYXRhIGZyYW1lLlxuICAjICAgZ3JvdXBfY29sX25hbWU6IENoYXJhY3RlciBzdHJpbmcsIG5hbWUgb2YgdGhlIGNvbHVtbiB0byBncm91cCBieSBhbmQgZmlsdGVyIG9uLlxuICAjICAgdmFsdWVfY29sX25hbWU6IENoYXJhY3RlciBzdHJpbmcsIG5hbWUgb2YgdGhlIGNvbHVtbiB0byBjYWxjdWxhdGUgdGhlIG1lYW4gZnJvbS5cbiAgIyAgIGZpbHRlcl90aHJlc2hvbGQ6IE51bWVyaWMsIHRoZSB2YWx1ZSB0byBmaWx0ZXIgJ2dyb3VwX2NvbF9uYW1lJyBieSAocm93cyBrZXB0IGlmID4gdGhyZXNob2xkKS5cbiAgI1xuICAjIFJldHVybnM6XG4gICMgICBBIGRhdGEgZnJhbWUgd2l0aCBncm91cCBtZWFucywgb3IgTlVMTCBpZiBpbnB1dHMgYXJlIGludmFsaWQuXG5cbiAgIyBJbnB1dCB2YWxpZGF0aW9uXG4gIGlmICghaXMuZGF0YS5mcmFtZShkYXRhKSkge1xuICAgIHN0b3AoXCJJbnB1dCAnZGF0YScgbXVzdCBiZSBhIGRhdGEgZnJhbWUuXCIpXG4gIH1cbiAgaWYgKCFpcy5jaGFyYWN0ZXIoZ3JvdXBfY29sX25hbWUpIHx8IGxlbmd0aChncm91cF9jb2xfbmFtZSkgIT0gMSB8fCAhZ3JvdXBfY29sX25hbWUgJWluJSBuYW1lcyhkYXRhKSkge1xuICAgIHN0b3AoXCInZ3JvdXBfY29sX25hbWUnIG11c3QgYmUgYSB2YWxpZCBjb2x1bW4gbmFtZSBpbiAnZGF0YScuXCIpXG4gIH1cbiAgaWYgKCFpcy5jaGFyYWN0ZXIodmFsdWVfY29sX25hbWUpIHx8IGxlbmd0aCh2YWx1ZV9jb2xfbmFtZSkgIT0gMSB8fCAhdmFsdWVfY29sX25hbWUgJWluJSBuYW1lcyhkYXRhKSkge1xuICAgIHN0b3AoXCIndmFsdWVfY29sX25hbWUnIG11c3QgYmUgYSB2YWxpZCBjb2x1bW4gbmFtZSBpbiAnZGF0YScuXCIpXG4gIH1cbiAgaWYgKCFpcy5udW1lcmljKGRhdGFbW2dyb3VwX2NvbF9uYW1lXV0pKSB7XG4gICAgc3RvcChwYXN0ZShcIkNvbHVtbiAnXCIsIGdyb3VwX2NvbF9uYW1lLCBcIicgbXVzdCBiZSBudW1lcmljIGZvciBmaWx0ZXJpbmcuXCIsIHNlcD1cIlwiKSlcbiAgfVxuICAgaWYgKCFpcy5udW1lcmljKGRhdGFbW3ZhbHVlX2NvbF9uYW1lXV0pKSB7XG4gICAgc3RvcChwYXN0ZShcIkNvbHVtbiAnXCIsIHZhbHVlX2NvbF9uYW1lLCBcIicgbXVzdCBiZSBudW1lcmljIGZvciBjYWxjdWxhdGluZyBtZWFuLlwiLCBzZXA9XCJcIikpXG4gIH1cbiAgaWYgKCFpcy5udW1lcmljKGZpbHRlcl90aHJlc2hvbGQpIHx8IGxlbmd0aChmaWx0ZXJfdGhyZXNob2xkKSAhPSAxKSB7XG4gICAgc3RvcChcIidmaWx0ZXJfdGhyZXNob2xkJyBtdXN0IGJlIGEgc2luZ2xlIG51bWVyaWMgdmFsdWUuXCIpXG4gIH1cblxuICAjIEZpbHRlciB0aGUgZGF0YToga2VlcCByb3dzIHdoZXJlIHRoZSBncm91cF9jb2xfbmFtZSB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gZmlsdGVyX3RocmVzaG9sZFxuICBzdWJzZXRfZGF0YSA8LSBkYXRhW2RhdGFbW2dyb3VwX2NvbF9uYW1lXV0gPiBmaWx0ZXJfdGhyZXNob2xkLCBdXG5cbiAgaWYgKG5yb3coc3Vic2V0X2RhdGEpID09IDApIHtcbiAgICB3YXJuaW5nKFwiTm8gZGF0YSByZW1haW5zIGFmdGVyIGZpbHRlcmluZy4gUmV0dXJuaW5nIGVtcHR5IHJlc3VsdC5cIilcbiAgICAjIENyZWF0ZSBhbiBlbXB0eSBkYXRhIGZyYW1lIHdpdGggZXhwZWN0ZWQgY29sdW1uIG5hbWVzXG4gICAgIyBUaGUgbmFtZXMgd2lsbCBiZSBncm91cF9jb2xfbmFtZSBhbmQgdmFsdWVfY29sX25hbWUgKG9yIHNpbWlsYXIgZGVwZW5kaW5nIG9uIGFnZ3JlZ2F0ZSlcbiAgICAjIEZvciBzaW1wbGljaXR5LCByZXR1cm5pbmcgTlVMTCBvciBhbiBlbXB0eSBuYW1lZCBsaXN0IG1pZ2h0IGFsc28gYmUgYW4gb3B0aW9uLlxuICAgICMgSGVyZSwgd2UgdHJ5IHRvIG1hdGNoIGFnZ3JlZ2F0ZSdzIHR5cGljYWwgb3V0cHV0IHN0cnVjdHVyZSBmb3IgY29uc2lzdGVuY3kuXG4gICAgZW1wdHlfZGYgPC0gZGF0YS5mcmFtZShtYXRyaXgobmNvbCA9IDIsIG5yb3cgPSAwKSlcbiAgICBuYW1lcyhlbXB0eV9kZikgPC0gYyhncm91cF9jb2xfbmFtZSwgdmFsdWVfY29sX25hbWUpICMgQWRqdXN0IGlmIGFnZ3JlZ2F0ZSBuYW1lcyBkaWZmZXJlbnRseVxuICAgIHJldHVybihlbXB0eV9kZilcbiAgfVxuXG4gICMgQ29uc3RydWN0IHRoZSBmb3JtdWxhIGZvciBhZ2dyZWdhdGlvbiBkeW5hbWljYWxseVxuICAjIGUuZy4sIHZhbHVlX2NvbHVtbiB+IGdyb3VwX2NvbHVtblxuICBmb3JtdWxhX3N0ciA8LSBwYXN0ZSh2YWx1ZV9jb2xfbmFtZSwgXCJ+XCIsIGdyb3VwX2NvbF9uYW1lKVxuICBhZ2dfZm9ybXVsYSA8LSBhcy5mb3JtdWxhKGZvcm11bGFfc3RyKVxuICBcbiAgIyBBZ2dyZWdhdGUgdG8gZmluZCB0aGUgbWVhbiBvZiB2YWx1ZV9jb2xfbmFtZSBmb3IgZWFjaCBncm91cCBpbiBncm91cF9jb2xfbmFtZVxuICAjIFRoZSByZXN1bHQgb2YgYWdncmVnYXRlIHdpbGwgaGF2ZSBjb2x1bW5zIG5hbWVkIGFmdGVyIGdyb3VwX2NvbF9uYW1lIGFuZCB2YWx1ZV9jb2xfbmFtZSAob3IgeClcbiAgYWdncmVnYXRlZF9yZXN1bHRzIDwtIGFnZ3JlZ2F0ZShhZ2dfZm9ybXVsYSwgZGF0YSA9IHN1YnNldF9kYXRhLCBGVU4gPSBtZWFuKVxuICBcbiAgcmV0dXJuKGFnZ3JlZ2F0ZWRfcmVzdWx0cylcbn1cblxuIyBFeGFtcGxlIFVzYWdlIChjb25jZXB0dWFsLCBhcyBpdCBkZXBlbmRzIG9uIGRhdGEpXG4jIHRlc3RfZGZfZXg2XzIgPC0gZGF0YS5mcmFtZShcbiMgICBjYXRlZ29yeSA9IGMoMTAsIDIwLCAxMCwgMzAsIDIwLCAzMCksXG4jICAgYW1vdW50ID0gYygxMDAsIDE1MCwgMTIwLCAyMDAsIDE4MCwgMjIwKSxcbiMgICBvdGhlcl9jb2wgPSBsZXR0ZXJzWzE6Nl1cbiMgKVxuIyByZXN1bHRfZXg2XzIgPC0gY2FsY3VsYXRlX21lYW5fYnlfZ3JvdXBfZmlsdGVyZWQodGVzdF9kZl9leDZfMiwgXCJjYXRlZ29yeVwiLCBcImFtb3VudFwiLCAxNSlcbiMgcHJpbnQocmVzdWx0X2V4Nl8yKVxuXG5wcmludChcIkV4ZXJjaXNlIDYuMjogUmV3cml0dGVuIGZ1bmN0aW9uICdjYWxjdWxhdGVfbWVhbl9ieV9ncm91cF9maWx0ZXJlZCcgZGVmaW5lZC5cIikiLCJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWUsInNvbHV0aW9uX2hpZGRlbiI6dHJ1ZSwiZXhlcmNpc2UiOiJleDYtMiJ9fQ==
</script>
</div>
</div>
<hr>
</section>
</section>
<section id="course-conclusion" class="level2">
<h2 class="anchored" data-anchor-id="course-conclusion">Course Conclusion</h2>
<p>Congratulations on completing the Troubleshooting and Debugging in R course!</p>
<p>Throughout these lessons, you’ve learned to: * Interpret R’s error messages effectively. * Utilize a range of built-in debugging tools like <code>browser()</code>, <code>traceback()</code>, <code>tryCatch()</code>. * Apply systematic approaches to isolate and resolve bugs. * Leverage advanced techniques such as <code>recover()</code> for post-mortem debugging and <code>profvis</code> for performance profiling. * Adapt your debugging strategies for specific contexts like Shiny, R Markdown/Quarto, and package development. * Embrace preventative measures, including writing unit tests with <code>testthat</code>, practicing defensive programming, and maintaining a clean, readable code style.</p>
<p>Debugging is a skill honed through practice. The more you encounter and solve errors, the more proficient you’ll become. Remember to be patient, methodical, and don’t hesitate to use the tools and techniques covered here.</p>
<p>Happy coding, and may your bugs be few and easy to find!</p>
<hr>


<script type="webr-data">
eyJvcHRpb25zIjp7ImJhc2VVcmwiOiJodHRwczovL3dlYnIuci13YXNtLm9yZy92MC40LjIvIn0sInJlbmRlcl9kZiI6ImRlZmF1bHQiLCJwYWNrYWdlcyI6eyJwa2dzIjpbImV2YWx1YXRlIiwia25pdHIiLCJodG1sdG9vbHMiXSwicmVwb3MiOltdfX0=
</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xMjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTIiLCJpbmxpbmUiOmZhbHNlfSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTIgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xMi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXhlcmNpc2UgY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICB7XG4gICAgICBpZDogXCJ3ZWJyLTEyLWNvbnRlbnRzXCIsXG4gICAgICBlbnZpcjogYGV4ZXJjaXNlLWVudi0ke2Jsb2NrLmF0dHIuZXhlcmNpc2V9YCxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgIGNhcHRpb246ICdFeGVyY2lzZScsXG4gICAgfSxcbiAgICBibG9jay5hdHRyXG4gICk7XG5cbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG52aWV3b2YgX3dlYnJfdmFsdWVfMTIgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzEyLCB7fSk7XG5fd2Vicl9mZWVkYmFja18xMiA9IHtcbiAgY29uc3QgeyBXZWJSR3JhZGVyIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBlbXB0eUZlZWRiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgY29uc3QgZ3JhZGVyID0gbmV3IFdlYlJHcmFkZXIoX3dlYnJfdmFsdWVfMTIuZXZhbHVhdG9yKTtcbiAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBncmFkZXIuZ3JhZGVFeGVyY2lzZSgpO1xuICBpZiAoIWZlZWRiYWNrKSByZXR1cm4gZW1wdHlGZWVkYmFjaztcbiAgcmV0dXJuIGZlZWRiYWNrO1xufVxuIiwibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoid2Vici0xMiIsImlubGluZSI6ZmFsc2V9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xMTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTEiLCJpbmxpbmUiOmZhbHNlfSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTEgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xMS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXhlcmNpc2UgY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICB7XG4gICAgICBpZDogXCJ3ZWJyLTExLWNvbnRlbnRzXCIsXG4gICAgICBlbnZpcjogYGV4ZXJjaXNlLWVudi0ke2Jsb2NrLmF0dHIuZXhlcmNpc2V9YCxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgIGNhcHRpb246ICdFeGVyY2lzZScsXG4gICAgfSxcbiAgICBibG9jay5hdHRyXG4gICk7XG5cbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG52aWV3b2YgX3dlYnJfdmFsdWVfMTEgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzExLCB7fSk7XG5fd2Vicl9mZWVkYmFja18xMSA9IHtcbiAgY29uc3QgeyBXZWJSR3JhZGVyIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBlbXB0eUZlZWRiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgY29uc3QgZ3JhZGVyID0gbmV3IFdlYlJHcmFkZXIoX3dlYnJfdmFsdWVfMTEuZXZhbHVhdG9yKTtcbiAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBncmFkZXIuZ3JhZGVFeGVyY2lzZSgpO1xuICBpZiAoIWZlZWRiYWNrKSByZXR1cm4gZW1wdHlGZWVkYmFjaztcbiAgcmV0dXJuIGZlZWRiYWNrO1xufVxuIiwibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoid2Vici0xMSIsImlubGluZSI6ZmFsc2V9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xMDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTAiLCJpbmxpbmUiOmZhbHNlfSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMTAgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xMC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXhlcmNpc2UgY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICB7XG4gICAgICBpZDogXCJ3ZWJyLTEwLWNvbnRlbnRzXCIsXG4gICAgICBlbnZpcjogYGV4ZXJjaXNlLWVudi0ke2Jsb2NrLmF0dHIuZXhlcmNpc2V9YCxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgIGNhcHRpb246ICdFeGVyY2lzZScsXG4gICAgfSxcbiAgICBibG9jay5hdHRyXG4gICk7XG5cbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG52aWV3b2YgX3dlYnJfdmFsdWVfMTAgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzEwLCB7fSk7XG5fd2Vicl9mZWVkYmFja18xMCA9IHtcbiAgY29uc3QgeyBXZWJSR3JhZGVyIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBlbXB0eUZlZWRiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgY29uc3QgZ3JhZGVyID0gbmV3IFdlYlJHcmFkZXIoX3dlYnJfdmFsdWVfMTAuZXZhbHVhdG9yKTtcbiAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBncmFkZXIuZ3JhZGVFeGVyY2lzZSgpO1xuICBpZiAoIWZlZWRiYWNrKSByZXR1cm4gZW1wdHlGZWVkYmFjaztcbiAgcmV0dXJuIGZlZWRiYWNrO1xufVxuIiwibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoid2Vici0xMCIsImlubGluZSI6ZmFsc2V9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV85O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIiwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0IiwiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC05IiwiaW5saW5lIjpmYWxzZX0seyJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzkgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici05LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBleGVyY2lzZSBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxuICAgIHtcbiAgICAgIGlkOiBcIndlYnItOS1jb250ZW50c1wiLFxuICAgICAgZW52aXI6IGBleGVyY2lzZS1lbnYtJHtibG9jay5hdHRyLmV4ZXJjaXNlfWAsXG4gICAgICBlcnJvcjogZmFsc2UsXG4gICAgICBjYXB0aW9uOiAnRXhlcmNpc2UnLFxuICAgIH0sXG4gICAgYmxvY2suYXR0clxuICApO1xuXG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxudmlld29mIF93ZWJyX3ZhbHVlXzkgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzksIHt9KTtcbl93ZWJyX2ZlZWRiYWNrXzkgPSB7XG4gIGNvbnN0IHsgV2ViUkdyYWRlciB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3QgZW1wdHlGZWVkYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIGNvbnN0IGdyYWRlciA9IG5ldyBXZWJSR3JhZGVyKF93ZWJyX3ZhbHVlXzkuZXZhbHVhdG9yKTtcbiAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBncmFkZXIuZ3JhZGVFeGVyY2lzZSgpO1xuICBpZiAoIWZlZWRiYWNrKSByZXR1cm4gZW1wdHlGZWVkYmFjaztcbiAgcmV0dXJuIGZlZWRiYWNrO1xufVxuIiwibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoid2Vici05IiwiaW5saW5lIjpmYWxzZX0seyJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzg7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4iLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTgiLCJpbmxpbmUiOmZhbHNlfSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfOCA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTgtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV4ZXJjaXNlIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAge1xuICAgICAgaWQ6IFwid2Vici04LWNvbnRlbnRzXCIsXG4gICAgICBlbnZpcjogYGV4ZXJjaXNlLWVudi0ke2Jsb2NrLmF0dHIuZXhlcmNpc2V9YCxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgIGNhcHRpb246ICdFeGVyY2lzZScsXG4gICAgfSxcbiAgICBibG9jay5hdHRyXG4gICk7XG5cbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG52aWV3b2YgX3dlYnJfdmFsdWVfOCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfOCwge30pO1xuX3dlYnJfZmVlZGJhY2tfOCA9IHtcbiAgY29uc3QgeyBXZWJSR3JhZGVyIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBlbXB0eUZlZWRiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgY29uc3QgZ3JhZGVyID0gbmV3IFdlYlJHcmFkZXIoX3dlYnJfdmFsdWVfOC5ldmFsdWF0b3IpO1xuICBjb25zdCBmZWVkYmFjayA9IGF3YWl0IGdyYWRlci5ncmFkZUV4ZXJjaXNlKCk7XG4gIGlmICghZmVlZGJhY2spIHJldHVybiBlbXB0eUZlZWRiYWNrO1xuICByZXR1cm4gZmVlZGJhY2s7XG59XG4iLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJ3ZWJyLTgiLCJpbmxpbmUiOmZhbHNlfSx7InNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfNztcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtNyIsImlubGluZSI6ZmFsc2V9LHsic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl83ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItNy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXhlcmNpc2UgY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICB7XG4gICAgICBpZDogXCJ3ZWJyLTctY29udGVudHNcIixcbiAgICAgIGVudmlyOiBgZXhlcmNpc2UtZW52LSR7YmxvY2suYXR0ci5leGVyY2lzZX1gLFxuICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgY2FwdGlvbjogJ0V4ZXJjaXNlJyxcbiAgICB9LFxuICAgIGJsb2NrLmF0dHJcbiAgKTtcblxuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbnZpZXdvZiBfd2Vicl92YWx1ZV83ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl83LCB7fSk7XG5fd2Vicl9mZWVkYmFja183ID0ge1xuICBjb25zdCB7IFdlYlJHcmFkZXIgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IGVtcHR5RmVlZGJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICBjb25zdCBncmFkZXIgPSBuZXcgV2ViUkdyYWRlcihfd2Vicl92YWx1ZV83LmV2YWx1YXRvcik7XG4gIGNvbnN0IGZlZWRiYWNrID0gYXdhaXQgZ3JhZGVyLmdyYWRlRXhlcmNpc2UoKTtcbiAgaWYgKCFmZWVkYmFjaykgcmV0dXJuIGVtcHR5RmVlZGJhY2s7XG4gIHJldHVybiBmZWVkYmFjaztcbn1cbiIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6IndlYnItNyIsImlubGluZSI6ZmFsc2V9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV82O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIiwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0IiwiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC02IiwiaW5saW5lIjpmYWxzZX0seyJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzYgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici02LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBleGVyY2lzZSBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxuICAgIHtcbiAgICAgIGlkOiBcIndlYnItNi1jb250ZW50c1wiLFxuICAgICAgZW52aXI6IGBleGVyY2lzZS1lbnYtJHtibG9jay5hdHRyLmV4ZXJjaXNlfWAsXG4gICAgICBlcnJvcjogZmFsc2UsXG4gICAgICBjYXB0aW9uOiAnRXhlcmNpc2UnLFxuICAgIH0sXG4gICAgYmxvY2suYXR0clxuICApO1xuXG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxudmlld29mIF93ZWJyX3ZhbHVlXzYgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzYsIHt9KTtcbl93ZWJyX2ZlZWRiYWNrXzYgPSB7XG4gIGNvbnN0IHsgV2ViUkdyYWRlciB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3QgZW1wdHlGZWVkYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIGNvbnN0IGdyYWRlciA9IG5ldyBXZWJSR3JhZGVyKF93ZWJyX3ZhbHVlXzYuZXZhbHVhdG9yKTtcbiAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBncmFkZXIuZ3JhZGVFeGVyY2lzZSgpO1xuICBpZiAoIWZlZWRiYWNrKSByZXR1cm4gZW1wdHlGZWVkYmFjaztcbiAgcmV0dXJuIGZlZWRiYWNrO1xufVxuIiwibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoid2Vici02IiwiaW5saW5lIjpmYWxzZX0seyJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzU7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4iLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTUiLCJpbmxpbmUiOmZhbHNlfSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfNSA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTUtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV4ZXJjaXNlIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAge1xuICAgICAgaWQ6IFwid2Vici01LWNvbnRlbnRzXCIsXG4gICAgICBlbnZpcjogYGV4ZXJjaXNlLWVudi0ke2Jsb2NrLmF0dHIuZXhlcmNpc2V9YCxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgIGNhcHRpb246ICdFeGVyY2lzZScsXG4gICAgfSxcbiAgICBibG9jay5hdHRyXG4gICk7XG5cbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG52aWV3b2YgX3dlYnJfdmFsdWVfNSA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfNSwge30pO1xuX3dlYnJfZmVlZGJhY2tfNSA9IHtcbiAgY29uc3QgeyBXZWJSR3JhZGVyIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBlbXB0eUZlZWRiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgY29uc3QgZ3JhZGVyID0gbmV3IFdlYlJHcmFkZXIoX3dlYnJfdmFsdWVfNS5ldmFsdWF0b3IpO1xuICBjb25zdCBmZWVkYmFjayA9IGF3YWl0IGdyYWRlci5ncmFkZUV4ZXJjaXNlKCk7XG4gIGlmICghZmVlZGJhY2spIHJldHVybiBlbXB0eUZlZWRiYWNrO1xuICByZXR1cm4gZmVlZGJhY2s7XG59XG4iLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJ3ZWJyLTUiLCJpbmxpbmUiOmZhbHNlfSx7InNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfNDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtNCIsImlubGluZSI6ZmFsc2V9LHsic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl80ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItNC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXhlcmNpc2UgY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICB7XG4gICAgICBpZDogXCJ3ZWJyLTQtY29udGVudHNcIixcbiAgICAgIGVudmlyOiBgZXhlcmNpc2UtZW52LSR7YmxvY2suYXR0ci5leGVyY2lzZX1gLFxuICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgY2FwdGlvbjogJ0V4ZXJjaXNlJyxcbiAgICB9LFxuICAgIGJsb2NrLmF0dHJcbiAgKTtcblxuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbnZpZXdvZiBfd2Vicl92YWx1ZV80ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl80LCB7fSk7XG5fd2Vicl9mZWVkYmFja180ID0ge1xuICBjb25zdCB7IFdlYlJHcmFkZXIgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IGVtcHR5RmVlZGJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICBjb25zdCBncmFkZXIgPSBuZXcgV2ViUkdyYWRlcihfd2Vicl92YWx1ZV80LmV2YWx1YXRvcik7XG4gIGNvbnN0IGZlZWRiYWNrID0gYXdhaXQgZ3JhZGVyLmdyYWRlRXhlcmNpc2UoKTtcbiAgaWYgKCFmZWVkYmFjaykgcmV0dXJuIGVtcHR5RmVlZGJhY2s7XG4gIHJldHVybiBmZWVkYmFjaztcbn1cbiIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6IndlYnItNCIsImlubGluZSI6ZmFsc2V9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zO1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIiwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0IiwiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0zIiwiaW5saW5lIjpmYWxzZX0seyJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzMgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBleGVyY2lzZSBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxuICAgIHtcbiAgICAgIGlkOiBcIndlYnItMy1jb250ZW50c1wiLFxuICAgICAgZW52aXI6IGBleGVyY2lzZS1lbnYtJHtibG9jay5hdHRyLmV4ZXJjaXNlfWAsXG4gICAgICBlcnJvcjogZmFsc2UsXG4gICAgICBjYXB0aW9uOiAnRXhlcmNpc2UnLFxuICAgIH0sXG4gICAgYmxvY2suYXR0clxuICApO1xuXG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxudmlld29mIF93ZWJyX3ZhbHVlXzMgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzMsIHt9KTtcbl93ZWJyX2ZlZWRiYWNrXzMgPSB7XG4gIGNvbnN0IHsgV2ViUkdyYWRlciB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3QgZW1wdHlGZWVkYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIGNvbnN0IGdyYWRlciA9IG5ldyBXZWJSR3JhZGVyKF93ZWJyX3ZhbHVlXzMuZXZhbHVhdG9yKTtcbiAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBncmFkZXIuZ3JhZGVFeGVyY2lzZSgpO1xuICBpZiAoIWZlZWRiYWNrKSByZXR1cm4gZW1wdHlGZWVkYmFjaztcbiAgcmV0dXJuIGZlZWRiYWNrO1xufVxuIiwibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoid2Vici0zIiwiaW5saW5lIjpmYWxzZX0seyJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzI7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4iLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTIiLCJpbmxpbmUiOmZhbHNlfSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMiA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTItY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV4ZXJjaXNlIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAge1xuICAgICAgaWQ6IFwid2Vici0yLWNvbnRlbnRzXCIsXG4gICAgICBlbnZpcjogYGV4ZXJjaXNlLWVudi0ke2Jsb2NrLmF0dHIuZXhlcmNpc2V9YCxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgIGNhcHRpb246ICdFeGVyY2lzZScsXG4gICAgfSxcbiAgICBibG9jay5hdHRyXG4gICk7XG5cbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG52aWV3b2YgX3dlYnJfdmFsdWVfMiA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMiwge30pO1xuX3dlYnJfZmVlZGJhY2tfMiA9IHtcbiAgY29uc3QgeyBXZWJSR3JhZGVyIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBlbXB0eUZlZWRiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgY29uc3QgZ3JhZGVyID0gbmV3IFdlYlJHcmFkZXIoX3dlYnJfdmFsdWVfMi5ldmFsdWF0b3IpO1xuICBjb25zdCBmZWVkYmFjayA9IGF3YWl0IGdyYWRlci5ncmFkZUV4ZXJjaXNlKCk7XG4gIGlmICghZmVlZGJhY2spIHJldHVybiBlbXB0eUZlZWRiYWNrO1xuICByZXR1cm4gZmVlZGJhY2s7XG59XG4iLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJ3ZWJyLTIiLCJpbmxpbmUiOmZhbHNlfSx7InNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMSIsImlubGluZSI6ZmFsc2V9LHsic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl8xID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXhlcmNpc2UgY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICB7XG4gICAgICBpZDogXCJ3ZWJyLTEtY29udGVudHNcIixcbiAgICAgIGVudmlyOiBgZXhlcmNpc2UtZW52LSR7YmxvY2suYXR0ci5leGVyY2lzZX1gLFxuICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgY2FwdGlvbjogJ0V4ZXJjaXNlJyxcbiAgICB9LFxuICAgIGJsb2NrLmF0dHJcbiAgKTtcblxuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbnZpZXdvZiBfd2Vicl92YWx1ZV8xID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xLCB7fSk7XG5fd2Vicl9mZWVkYmFja18xID0ge1xuICBjb25zdCB7IFdlYlJHcmFkZXIgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IGVtcHR5RmVlZGJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICBjb25zdCBncmFkZXIgPSBuZXcgV2ViUkdyYWRlcihfd2Vicl92YWx1ZV8xLmV2YWx1YXRvcik7XG4gIGNvbnN0IGZlZWRiYWNrID0gYXdhaXQgZ3JhZGVyLmdyYWRlRXhlcmNpc2UoKTtcbiAgaWYgKCFmZWVkYmFjaykgcmV0dXJuIGVtcHR5RmVlZGJhY2s7XG4gIHJldHVybiBmZWVkYmFjaztcbn1cbiIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6IndlYnItMSIsImlubGluZSI6ZmFsc2V9LHsic291cmNlIjoid2ViUk9qcyA9IHtcbiAgY29uc3QgeyBXZWJSLCBDaGFubmVsVHlwZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZS5XZWJSO1xuICBjb25zdCB7XG4gICAgV2ViUkV2YWx1YXRvcixcbiAgICBXZWJSRW52aXJvbm1lbnRNYW5hZ2VyLFxuICAgIHNldHVwUixcbiAgICBiNjREZWNvZGUsXG4gICAgY29sbGFwc2VQYXRoXG4gIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuXG4gIGNvbnN0IHN0YXR1c0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXhlcmNpc2UtbG9hZGluZy1zdGF0dXNcIik7XG4gIGNvbnN0IGluZGljYXRvckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXhlcmNpc2UtbG9hZGluZy1pbmRpY2F0b3JcIik7XG4gIGluZGljYXRvckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiZC1ub25lXCIpO1xuXG4gIGxldCBzdGF0dXNUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICBzdGF0dXNUZXh0LmNsYXNzTGlzdCA9IFwiZXhlcmNpc2UtbG9hZGluZy1kZXRhaWxzXCI7XG4gIHN0YXR1c1RleHQgPSBzdGF0dXNDb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdHVzVGV4dCk7XG4gIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgSW5pdGlhbGlzZWA7XG5cbiAgLy8gSG9pc3QgaW5kaWNhdG9yIG91dCBmcm9tIGZpbmFsIHNsaWRlIHdoZW4gcnVubmluZyB1bmRlciByZXZlYWxcbiAgY29uc3QgcmV2ZWFsU3RhdHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXZlYWwgLmV4ZXJjaXNlLWxvYWRpbmctaW5kaWNhdG9yXCIpO1xuICBpZiAocmV2ZWFsU3RhdHVzKSB7XG4gICAgcmV2ZWFsU3RhdHVzLnJlbW92ZSgpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmV2ZWFsID4gLnNsaWRlc1wiKS5hcHBlbmRDaGlsZChyZXZlYWxTdGF0dXMpO1xuICB9XG5cbiAgLy8gTWFrZSBhbnkgcmV2ZWFsIHNsaWRlcyB3aXRoIGxpdmUgY2VsbHMgc2Nyb2xsYWJsZVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJldmVhbCAuZXhlcmNpc2UtY2VsbFwiKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGVsLmNsb3Nlc3QoJ3NlY3Rpb24uc2xpZGUnKS5jbGFzc0xpc3QuYWRkKFwic2Nyb2xsYWJsZVwiKTtcbiAgfSlcblxuICAvLyB3ZWJSIHN1cHBsZW1lbnRhbCBkYXRhIGFuZCBvcHRpb25zXG4gIGNvbnN0IGRhdGFDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItZGF0YVxcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGI2NERlY29kZShkYXRhQ29udGVudCkpO1xuXG4gIC8vIEdyYWIgbGlzdCBvZiByZXNvdXJjZXMgdG8gYmUgZG93bmxvYWRlZFxuICBjb25zdCBmaWxlc0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwidmZzLWZpbGVcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBmaWxlcyA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKGZpbGVzQ29udGVudCkpO1xuXG4gIC8vIFVzZSBQb3N0TWVzc2FnZSBjaGFubmVsIGZvciBhc3luYyBjb21tdW5pY2F0aW9uXG4gIC8vIFdlIGRvIG5vdCBleHBlY3QgdG8gdGFrZSBuZXN0ZWQgcHJvbXB0IGlucHV0IGluIFF1YXJ0byBMaXZlIGNlbGxzXG4gIGRhdGEub3B0aW9ucy5jaGFubmVsVHlwZSA9IENoYW5uZWxUeXBlLlBvc3RNZXNzYWdlO1xuXG4gIC8vIEluaXRpYWxpc2Ugd2ViUiBhbmQgc2V0dXAgZm9yIFIgY29kZSBldmFsdWF0aW9uXG4gIGxldCB3ZWJSUHJvbWlzZSA9IChhc3luYyAod2ViUikgPT4ge1xuICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgd2ViUmA7XG4gICAgYXdhaXQgd2ViUi5pbml0KCk7XG5cbiAgICAvLyBJbnN0YWxsIHByb3ZpZGVkIGxpc3Qgb2YgcGFja2FnZXNcbiAgICAvLyBFbnN1cmUgd2ViUiBkZWZhdWx0IHJlcG8gaXMgaW5jbHVkZWRcbiAgICBkYXRhLnBhY2thZ2VzLnJlcG9zLnB1c2goXCJodHRwczovL3JlcG8uci13YXNtLm9yZ1wiKVxuICAgIGF3YWl0IGRhdGEucGFja2FnZXMucGtncy5tYXAoKHBrZykgPT4gKCkgPT4ge1xuICAgICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBEb3dubG9hZGluZyBwYWNrYWdlOiAke3BrZ31gO1xuICAgICAgcmV0dXJuIHdlYlIuZXZhbFJWb2lkKGBcbiAgICAgICAgd2Vicjo6aW5zdGFsbChwa2csIHJlcG9zID0gcmVwb3MsIG1vdW50ID0gRkFMU0UpXG4gICAgICAgIGxpYnJhcnkocGtnLCBjaGFyYWN0ZXIub25seSA9IFRSVUUpXG4gICAgICBgLCB7IGVudjoge1xuICAgICAgICBwa2c6IHBrZyxcbiAgICAgICAgcmVwb3M6IGRhdGEucGFja2FnZXMucmVwb3MsXG4gICAgICB9fSk7XG4gICAgfSkucmVkdWNlKChjdXIsIG5leHQpID0+IGN1ci50aGVuKG5leHQpLCBQcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICAvLyBEb3dubG9hZCBhbmQgaW5zdGFsbCByZXNvdXJjZXNcbiAgICBhd2FpdCBmaWxlcy5tYXAoKGZpbGUpID0+IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgPSBmaWxlLnN1YnN0cmluZyhmaWxlLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgcmVzb3VyY2U6ICR7bmFtZX1gO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmaWxlKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBkb3dubG9hZCBcXGAke2ZpbGV9XFxgLiBFcnJvciAke3Jlc3BvbnNlLnN0YXR1c306IFwiJHtyZXNwb25zZS5zdGF0dXNUZXh0fVwiLmApO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XG5cbiAgICAgIC8vIFN0b3JlIFVSTHMgaW4gdGhlIGN3ZCB3aXRob3V0IGFueSBzdWJkaXJlY3Rvcnkgc3RydWN0dXJlXG4gICAgICBpZiAoZmlsZS5pbmNsdWRlcyhcIjovL1wiKSkge1xuICAgICAgICBmaWxlID0gbmFtZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29sbGFwc2UgaGlnaGVyIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICAgIGZpbGUgPSBjb2xsYXBzZVBhdGgoZmlsZSk7XG5cbiAgICAgIC8vIENyZWF0ZSBkaXJlY3RvcnkgdHJlZSwgaWdub3JpbmcgXCJkaXJlY3RvcnkgZXhpc3RzXCIgVkZTIGVycm9yc1xuICAgICAgY29uc3QgcGFydHMgPSBmaWxlLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpO1xuICAgICAgbGV0IHBhdGggPSAnJztcbiAgICAgIHdoaWxlIChwYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhdGggKz0gcGFydHMuc2hpZnQoKSArICcvJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB3ZWJSLkZTLm1rZGlyKHBhdGgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgaWYgKCFlLm1lc3NhZ2UuaW5jbHVkZXMoXCJGUyBlcnJvclwiKSkge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV3JpdGUgdGhpcyBmaWxlIHRvIHRoZSBWRlNcbiAgICAgIHJldHVybiBhd2FpdCB3ZWJSLkZTLndyaXRlRmlsZShmaWxlLCBuZXcgVWludDhBcnJheShkYXRhKSk7XG4gICAgfSkucmVkdWNlKChjdXIsIG5leHQpID0+IGN1ci50aGVuKG5leHQpLCBQcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYEluc3RhbGxpbmcgd2ViUiBzaGltc2A7XG4gICAgYXdhaXQgd2ViUi5ldmFsUlZvaWQoYHdlYnI6OnNoaW1faW5zdGFsbCgpYCk7XG5cbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYFdlYlIgZW52aXJvbm1lbnQgc2V0dXBgO1xuICAgIGF3YWl0IHNldHVwUih3ZWJSLCBkYXRhKTtcblxuICAgIHN0YXR1c1RleHQucmVtb3ZlKCk7XG4gICAgaWYgKHN0YXR1c0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggPT0gMCkge1xuICAgICAgc3RhdHVzQ29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlKCk7XG4gICAgfVxuICAgIHJldHVybiB3ZWJSO1xuICB9KShuZXcgV2ViUihkYXRhLm9wdGlvbnMpKTtcblxuICAvLyBLZWVwIHRyYWNrIG9mIGluaXRpYWwgT0pTIGJsb2NrIHJlbmRlclxuICBjb25zdCByZW5kZXJlZE9qcyA9IHt9O1xuXG4gIGNvbnN0IHByb2Nlc3MgPSBhc3luYyAoY29udGV4dCwgaW5wdXRzKSA9PiB7XG4gICAgY29uc3Qgd2ViUiA9IGF3YWl0IHdlYlJQcm9taXNlO1xuICAgIGNvbnN0IGV2YWx1YXRvciA9IG5ldyBXZWJSRXZhbHVhdG9yKHdlYlIsIGNvbnRleHQpXG4gICAgYXdhaXQgZXZhbHVhdG9yLnByb2Nlc3MoaW5wdXRzKTtcbiAgICByZXR1cm4gZXZhbHVhdG9yLmNvbnRhaW5lcjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcHJvY2VzcyxcbiAgICB3ZWJSUHJvbWlzZSxcbiAgICByZW5kZXJlZE9qcyxcbiAgfTtcbn1cbiIsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsImNlbGxOYW1lIjoid2Vici1wcmVsdWRlIiwiaW5saW5lIjpmYWxzZX1dfQ==
</script>
<div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
W10=
</script>
</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../advanced/troubleshooting-debugging";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/we-data-ch\.github\.io\/wedata-ultimate-r-exercises\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2024, Vestin Hategekimana</p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 <img src="../../images/primary.png" width="auto" height="30px">
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/we-data-ch">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/@wedata_unige">
      <i class="bi bi-youtube" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/wedata_unige">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/company/wedata-gen%C3%A8ve/">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>